<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.6.2">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Guillaume Dueymes">

  
  
  
    
  
  <meta name="description" content="﻿ In this tutorial, we will extract Hourly Observation from ECCC and display hourly temperature using plotly library.
We are going to work here with the hourly weather observations data found on the ECCC Datamart.
These observations data are subject to quality control. Any value that does not pass quality control is deleted. This includes values that are categorized as questionable.
For each province or territory, one file for one specific hour contains:">

  
  <link rel="alternate" hreflang="en-us" href="/post/working_with_xml_climate_data/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/working_with_xml_climate_data/">

  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="GDueymes">
  <meta property="og:url" content="/post/working_with_xml_climate_data/">
  <meta property="og:title" content="Working with XML climate data | GDueymes">
  <meta property="og:description" content="﻿ In this tutorial, we will extract Hourly Observation from ECCC and display hourly temperature using plotly library.
We are going to work here with the hourly weather observations data found on the ECCC Datamart.
These observations data are subject to quality control. Any value that does not pass quality control is deleted. This includes values that are categorized as questionable.
For each province or territory, one file for one specific hour contains:"><meta property="og:image" content="/post/working_with_xml_climate_data/featured.png">
  <meta property="twitter:image" content="/post/working_with_xml_climate_data/featured.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-03-10T11:16:07-07:00">
    
    <meta property="article:modified_time" content="2020-03-10T11:16:07-07:00">
  

  


    






  






<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/working_with_xml_climate_data/"
  },
  "headline": "Working with XML climate data",
  
  "image": [
    "/post/working_with_xml_climate_data/featured.png"
  ],
  
  "datePublished": "2020-03-10T11:16:07-07:00",
  "dateModified": "2020-03-10T11:16:07-07:00",
  
  "author": {
    "@type": "Person",
    "name": "Guillaume Dueymes"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "GDueymes",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/icon-512.png"
    }
  },
  "description": "﻿ In this tutorial, we will extract Hourly Observation from ECCC and display hourly temperature using plotly library.\nWe are going to work here with the hourly weather observations data found on the ECCC Datamart.\nThese observations data are subject to quality control. Any value that does not pass quality control is deleted. This includes values that are categorized as questionable.\nFor each province or territory, one file for one specific hour contains:"
}
</script>

  

  


  


  





  <title>Working with XML climate data | GDueymes</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    
    
      <a class="navbar-brand" href="/">GDueymes</a>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/"><span>Courses</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/Guillaume_Dueymes2019.pdf"><span>CV</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Working with XML climate data</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Mar 10, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    7 min read
  </span>
  

  
  
  

  
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 720px;">
  <div style="position: relative">
    <img src="/post/working_with_xml_climate_data/featured_huf36585a0a02f53b8dfb4565c4dd0a36d_310556_720x0_resize_lanczos_2.png" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      

<p>﻿
In this tutorial, we will extract Hourly Observation from ECCC and display hourly temperature using plotly library.</p>

<p>We are going to work here with the hourly weather observations data found on the ECCC Datamart.</p>

<p>These observations data are subject to quality control.
Any value that does not pass quality control is deleted.
This includes values that are categorized as questionable.</p>

<p>For each province or territory, one file for one specific hour contains:</p>

<ul>
<li>The coldest place and temperature in Canada for this hour</li>
<li>The hottest location and temperature in Canada for this hour</li>
<li>The coldest place and temperature in the province or territory for this hour</li>

<li><p>The hottest location and temperature in the province for territory for this hour</p></li>

<li><p>The observations and the records of the stations available in this province:</p>

<ul>
<li>Present condition (expression)</li>
<li>Sea level pressure (kPa)</li>
<li>Value of the pressure trend (kPa)</li>
<li>Pressure trend (upward, downward, or stable)</li>
<li>Visibility (km)</li>
<li>Air temperature (° C)</li>
<li>Dew point (° C)</li>
<li>Relative humidity (%)</li>
<li>Wind speed (km / h)</li>
<li>Wind direction (code)</li>
<li>Burst speed (km / h)</li>
<li>Cloud cover</li>
<li>Wind Chill</li>
<li>Humidex</li>
</ul></li>
</ul>

<hr />

<h2 id="stations-information">Stations information:</h2>

<hr />

<p>For each station, the following information is available:
* Station name
* Latitude (decimal degree)
* Longitude (decimal degree)
* Transport Canada identification number
* Observation times are in UTC time and local time
* Climate station ID
* WMO station number</p>

<p>There are over 500 observation stations in Canada. However, this number is constantly evolving. The stations are present in the files only if observation data are available.</p>

<p>&lsquo;swob-xml_station_list.csv&rsquo; document on this <a href="https://dd.weather.gc.ca/observations/doc/" target="_blank">link</a> is a list of XML observations available.</p>

<p><a href="http://dd.weather.gc.ca/observations/doc/Met-ML-SchemaDescriptionV2_e.pdf" target="_blank">Here</a> is a full documentation for XML description of observation point meteorological:</p>

<p><a href="http://www.opengeospatial.org/standards/om" target="_blank">OpenGIS</a> : Standards for observations and measurement.</p>

<p><a href="http://www.weatheroffice.gc.ca/mainmenu/faq_f.html" target="_blank">Frequently Asked Questions from Environment and Change Weather Service Climate Canada</a> Frequently Asked Questions from Environment and Change Weather Service Climate Canada. Miscellaneous information about meteorology and climatology.</p>

<p>Historical climatic data are available on this <a href="http://climate.weatheroffice.gc.ca" target="_blank">site</a>.</p>

<p>Synoptic and METAR bulletins can also be found on the <a href="http://dd.weather.gc.ca/bulletins/doc/README_bulletins.txt" target="_blank">MSC HTTP data server</a>.</p>

<p>First, we import python librairies and define the date we want to extract:</p>

<pre><code class="language-python">from datetime import datetime, timedelta
import pandas as pd 
import xml.etree.ElementTree as ET
import wget
import warnings
warnings.filterwarnings(&quot;ignore&quot;)
import os 
from os.path import exists
import requests
import numpy as np
</code></pre>

<p>We will work first with all the stations over Quebec (ie file with prefix hourly<em>qc</em>):</p>

<p>We will work on this <a href="https://dd.weather.gc.ca/observations/xml/" target="_blank">directory</a>.</p>

<p>We want to extreact the latest value recorded.</p>

<pre><code class="language-python">now = datetime.utcnow() - timedelta(hours=1)
tmp_file = 'http://dd.weather.ec.gc.ca/observations/xml/QC/hourly/hourly_qc_'+now.strftime(&quot;%Y%m%d%H&quot;)+'_e.xml'
</code></pre>

<pre><code class="language-python">wget.download(tmp_file)
</code></pre>

<pre><code>'hourly_qc_2020031017_e (1).xml'
</code></pre>

<pre><code class="language-python">tree = ET.parse('hourly_qc_'+now.strftime(&quot;%Y%m%d%H&quot;)+'_e.xml')
root=tree.getroot()
children = root.getchildren()
</code></pre>

<p>Number of elements in our file:</p>

<pre><code class="language-python"># total amount of items
print(len(root))
</code></pre>

<pre><code>122
</code></pre>

<h3 id="to-scan-the-elements-of-our-set-ie-the-children-of-our-root">To scan the elements of our set, ie the children of our &lsquo;root&rsquo;:</h3>

<p>for child in root.iter(&rsquo;*&lsquo;):<br />
    #print(child)
    #print(child.attrib)
    #print(child.attrib.get(&lsquo;value&rsquo;))
    print(child.attrib.get(&lsquo;name&rsquo;))</p>

<h3 id="example-of-station-detection">Example of station detection:</h3>

<pre><code class="language-python">for child in root.iter('*'): 
    if child.attrib.get('value') == '7110600':
        print(child.tag)
        print('station trouvee')
        print(child.attrib.get('name') + ': 7110600' )
        print(child.items())
        print(child.get('value'))
        test = tree.find('.//%s/' % child.tag)
</code></pre>

<pre><code>{http://dms.ec.gc.ca/schema/point-observation/2.1}element
station trouvee
climate_station_number: 7110600
[('name', 'climate_station_number'), ('uom', 'unitless'), ('value', '7110600')]
7110600
</code></pre>

<p>The list of variables is available on this <a href="https://dd.weather.gc.ca/observations/doc/Met-ML-SchemaDescriptionV2_f.pdf" target="_blank">document</a>.</p>

<h2 id="1-observations-extraction">1- Observations extraction:</h2>

<p>We will loop over all stations in Quebec and extract some meteorological values.</p>

<pre><code class="language-python">mslp=[]
air=[]  
dew=[]
rel=[]
winds=[]
windd=[]
windc=[]
humidex=[]
stid=[]
present_weather = []
horizontal_visibility = []
station_name = []
latitude = []
longitude = []
for child in root.iter('*'):      
    if child.attrib.get('name') == 'present_weather':
        present_weather.append(child.get('value'))        
    if child.attrib.get('name') == 'mean_sea_level':
        mslp.append(child.get('value'))
    if child.attrib.get('name') == 'air_temperature':
        air.append(child.get('value'))
    if child.attrib.get('name') == 'dew_point':
        dew.append(child.get('value'))
    if child.attrib.get('name') == 'relative_humidity':
        rel.append(child.get('value'))
    if child.attrib.get('name') == 'wind_speed':
        winds.append(child.get('value'))
    if child.attrib.get('name') == 'wind_direction':
        windd.append(child.get('value'))
    if child.attrib.get('name') == 'wind_chill':
        windc.append(child.get('value'))
    if child.attrib.get('name') == 'humidex':
        humidex.append(child.get('value'))
    if child.attrib.get('name') == 'horizontal_visibility':
        horizontal_visibility.append(child.get('value')) 
        
    if child.attrib.get('name') == 'climate_station_number':
        stid.append(child.get('value')) 
    if child.attrib.get('name') == 'station_name':
        station_name.append(child.get('value'))    
    if child.attrib.get('name') == 'latitude':
        latitude.append(child.get('value'))
    if child.attrib.get('name') == 'longitude':
        longitude.append(child.get('value'))        
</code></pre>

<pre><code class="language-python">date = now.strftime(&quot;%Y-%m-%d %H:00&quot;)
month =  now.strftime(&quot;%Y%m&quot;)
os.makedirs(month, exist_ok=True)  

data = {'climate_station_number':stid,
        'station_name': station_name,
        'latitude': latitude,
        'longitude': longitude,
        'date':date, 
        'mean_sea_level':mslp,
        'air_temperature':air,
        'dew_point':dew,
        'relative_humidity': rel,
        'wind_speed':winds,
        'wind_direction':windd,
        'wind_chill':windc,
        'humidex':humidex,
        'horizontal_visibility':horizontal_visibility } 

data= pd.DataFrame(data).set_index(&quot;climate_station_number&quot;)   
</code></pre>

<p>If we want to select a specific station:</p>

<pre><code class="language-python">data[data['station_name']== 'Montréal']
</code></pre>

<pre><code>| climate_station_number   | station_name   |   latitude |   longitude | date             |   mean_sea_level |   air_temperature |   dew_point |   relative_humidity |   wind_speed | wind_direction   | wind_chill   | humidex   | horizontal_visibility   |
|:-------------------------|:---------------|-----------:|------------:|:-----------------|-----------------:|------------------:|------------:|--------------------:|-------------:|:-----------------|:-------------|:----------|:------------------------|
| 702S006                  | Montréal       |    45.4678 |    -73.7417 | 2020-03-10 17:00 |            100.7 |               2.1 |         1.5 |                  96 |           10 | NNE              |              |           |                         |
</code></pre>

<p>To save our data by stations:</p>

<pre><code class="language-python">for index, row in data.iterrows(): 
    file = 'D:/Utilisateurs/guillaume/Documents/GitHub/Python_XML/'+month+'/'+index+'_'+month+'.csv'
    if exists(file):
        #print (&quot;File exist&quot;)
        pd.DataFrame(row).T.to_csv(r'D:/Utilisateurs/guillaume/Documents/GitHub/Python_XML/'+month+'/'+index+'_'+month+'.csv',mode='a',index=False,header=False) 
    else:
        #print (&quot;File not exist&quot;)
        pd.DataFrame(row).T.to_csv(r'D:/Utilisateurs/guillaume/Documents/GitHub/Python_XML/'+month+'/'+index+'_'+month+'.csv',index=False) 
</code></pre>

<p>We now have everything we need to use Plotly library in order to have interactive scatter plots on maps.</p>

<p>We use the Plotly Express function px.scatter_mapbox to display current temperature observations over Canada.</p>

<pre><code class="language-python">list_province =  ['AB','BC','MB','NB','NL','NS','NT','NU','ON','PE','QC','SK','YT']

dataset = []
for province in list_province:    
    tmp_file = 'http://dd.weather.ec.gc.ca/observations/xml/'+province+'/hourly/hourly_'+province.lower()+'_'+now.strftime(&quot;%Y%m%d%H&quot;)+'_e.xml'
    r = requests.get(tmp_file)
    root = ET.fromstring(r.content)
    latitude = []
    longitude = []
    air=[]  
    stid=[]
    station_name = []
    latitude = []
    longitude = []
    data = []
    
    for child in root.iter('*'):      
        if child.attrib.get('name') == 'air_temperature':
            air.append(child.get('value'))       
        if child.attrib.get('name') == 'climate_station_number':
            stid.append(child.get('value')) 
        if child.attrib.get('name') == 'station_name':
            station_name.append(child.get('value'))    
        if child.attrib.get('name') == 'latitude':
            latitude.append(child.get('value'))
        if child.attrib.get('name') == 'longitude':
            longitude.append(child.get('value'))    
    data = {'climate_station_number':stid,
            'station_name': station_name,
            'latitude': latitude,
            'longitude': longitude,
            'date':date, 
            'air_temperature':air } 

    data = pd.DataFrame(data)
    dataset.append(data)

</code></pre>

<pre><code class="language-python">dataset = pd.concat(dataset)
</code></pre>

<pre><code class="language-python">dataset[['latitude', 'longitude']] = dataset[['latitude', 'longitude']].astype(float)
dataset[['air_temperature']] = pd.to_numeric(dataset['air_temperature'].str.replace(' ', '')).astype(float)
dataset['Size']=([0.5] * len(dataset))
</code></pre>

<p>We can now create our scatter plot using plotly:</p>

<pre><code class="language-python">import plotly.express as px
# Create a token in mapbox
token = '**** '

fig = px.scatter_mapbox(dataset,
        lat = 'latitude',
        lon = 'longitude',
        zoom=2.5,
        hover_name='date',
        range_color=(-30, 5),
        size='Size',
        color='air_temperature',
        color_continuous_scale=px.colors.sequential.Jet,
        width = 1000,
        height = 1000
        )
# Configure the style of the map
fig.update_layout(
        mapbox_style=&quot;light&quot;, 
        mapbox_accesstoken=token
    )

</code></pre>

<p><img src="scatter.png" alt="png" /></p>

<p>We can push our visualization to our plotly account using the following lines of code:</p>

<pre><code class="language-python">import chart_studio

username = 'username'
api_key = '******'

chart_studio.tools.set_credentials_file(username = username, api_key = api_key)
import chart_studio.plotly as py 
py.plot(fig, filename = 'scatter_plot', auto_open = True)
</code></pre>

<p>If done correctly, this code should open a new window with your visualization on your account and return the link in your notebook.</p>

<pre><code>'https://plot.ly/~guimeteo/19/'
</code></pre>

<p>Now we have the <a href="https://plot.ly/~guimeteo/19/" target="_blank">link</a>  to our plotly visualization (either hosted on plotly or github pages).</p>

<h2 id="2-plot-timeserie-for-one-station">2- Plot timeserie for one station:</h2>

<pre><code class="language-python">from datetime import datetime
end_date = datetime.utcnow() - timedelta(hours=1) 
start_date = datetime.utcnow() - timedelta(days=14)
</code></pre>

<pre><code class="language-python">mydate = start_date
while mydate &lt; end_date:    
    #print((mydate).strftime(&quot;%Y-%m-%d %H:00&quot;))
    mydate += timedelta(hours=1)
</code></pre>

<pre><code class="language-python">from datetime import datetime
end_date = datetime.utcnow() - timedelta(hours=1) 
start_date = datetime.utcnow() - timedelta(days=14)
mydate = start_date
dataset = []
while mydate &lt; end_date:    
    #print((mydate).strftime(&quot;%Y-%m-%d %H:00&quot;))  
    tmp_file = 'http://dd.weather.ec.gc.ca/observations/xml/QC/hourly/hourly_qc_'+mydate.strftime(&quot;%Y%m%d%H&quot;)+'_e.xml'
    r = requests.get(tmp_file)
    root = ET.fromstring(r.content)
    air=[]  
    stid=[]
    latitude = []
    longitude = []
    data  = []
    station = [] 
    for child in root.iter('*'):      
        if child.attrib.get('name') == 'air_temperature':
            air.append(child.get('value'))
        if child.attrib.get('name') == 'climate_station_number':
            stid.append(child.get('value'))       
        if child.attrib.get('name') == 'latitude':
            latitude.append(child.get('value'))
        if child.attrib.get('name') == 'longitude':
            longitude.append(child.get('value'))
        if child.attrib.get('name') == 'station_name':
            station.append(child.get('value'))    

    date = now.strftime(&quot;%Y-%m-%d %H:00&quot;)
    month =  now.strftime(&quot;%Y%m&quot;)

    data = {'climate_station_number':stid,
            'latitude': latitude,
            'longitude': longitude,
            'date':mydate.strftime(&quot;%Y-%m-%d:%H&quot;), 
            'air_temperature':air,
            'name station': station} 
    
    mydate += timedelta(hours=1) 
    
    data = pd.DataFrame(data)
    dataset.append(data)   
</code></pre>

<pre><code class="language-python">dataset = pd.concat(dataset)
</code></pre>

<pre><code class="language-python">dataset.head()
</code></pre>

<pre><code>|    | climate_station_number   |   latitude |   longitude | date          |   air_temperature | name station        |
|---:|:-------------------------|-----------:|------------:|:--------------|------------------:|:--------------------|
|  0 | 7100071                  |    60.8186 |    -78.1486 | 2020-02-25:18 |             -29.9 | Akulivik Airport    |
|  1 | 7110600                  |    59.2967 |    -69.5997 | 2020-02-25:18 |             -26.6 | Aupaluk Airport     |
|  2 | 704S001                  |    49.2592 |    -68.1458 | 2020-02-25:18 |               0.6 | Baie-Comeau         |
|  3 | 7040444                  |    49.1325 |    -68.2044 | 2020-02-25:18 |               2.1 | Baie-Comeau Airport |
|  4 | 7040442                  |    49.1333 |    -68.2    | 2020-02-25:18 |               1.7 | Baie-Comeau Climate |
</code></pre>

<p>We will plot daily timeserie for station with climate_station_number = &lsquo;702S006&rsquo;</p>

<pre><code class="language-python">dataset1 =  dataset[dataset['climate_station_number']=='702S006']
</code></pre>

<pre><code class="language-python">dataset1.head()
</code></pre>

<pre><code>|    | climate_station_number   |   latitude |   longitude | date          |   air_temperature | name station   |
|---:|:-------------------------|-----------:|------------:|:--------------|------------------:|:---------------|
| 64 | 702S006                  |    45.4678 |    -73.7417 | 2020-02-25:18 |               4.2 | Montréal       |
| 66 | 702S006                  |    45.4678 |    -73.7417 | 2020-02-25:19 |               3.5 | Montréal       |
| 65 | 702S006                  |    45.4678 |    -73.7417 | 2020-02-25:20 |               4.5 | Montréal       |
| 65 | 702S006                  |    45.4678 |    -73.7417 | 2020-02-25:21 |               5   | Montréal       |
| 65 | 702S006                  |    45.4678 |    -73.7417 | 2020-02-25:22 |               5   | Montréal       |
</code></pre>

<pre><code class="language-python">import datetime
fig = px.line(dataset1, x='date', y='air_temperature')
fig.update_layout(title_text='Hourly mean temperature in Montreal',
                  xaxis_rangeslider_visible=True)
fig.show()
</code></pre>

<pre><code class="language-python">import plotly.io as pio
pio.write_html(fig, file = 'timeserie.html', auto_open = True)
fig.write_image(&quot;timeserie.png&quot;)
</code></pre>

<p><img src="timeserie.png" alt="png" /></p>

<p>Follow this <a href="https://plot.ly/~guimeteo/22/" target="_blank">link</a> for interactive plot.</p>

    </div>

    







<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/working_with_xml_climate_data/&amp;text=Working%20with%20XML%20climate%20data" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/working_with_xml_climate_data/&amp;t=Working%20with%20XML%20climate%20data" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Working%20with%20XML%20climate%20data&amp;body=/post/working_with_xml_climate_data/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/working_with_xml_climate_data/&amp;title=Working%20with%20XML%20climate%20data" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Working%20with%20XML%20climate%20data%20/post/working_with_xml_climate_data/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/working_with_xml_climate_data/&amp;title=Working%20with%20XML%20climate%20data" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  






  
  
  
    
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="portrait mr-3" src="/authors/admin/avatar_hued2496a182fbb6fc8c711157078d29a6_5348924_250x250_fill_q90_lanczos_center.jpg" alt="Avatar">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/">Guillaume Dueymes</a></h5>
      <h6 class="card-subtitle">Data Scientist and Research Assistant</h6>
      <p class="card-text">My research interests include data science, data management and climate science.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.researchgate.net/profile/Guillaume_Dueymes" target="_blank" rel="noopener">
        <i class="fab fa-researchgate"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/guimeto" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>









  
  



  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

      
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.bcfae8267aba63cc55af53a503896bd9.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
