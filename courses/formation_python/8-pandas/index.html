<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.6.2">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Guillaume Dueymes">

  
  
  
    
  
  <meta name="description" content="La librairie Pandas: Pandas est une bibliothèque spécialisée dans la manipulation de données. Cette bibliothèque regroupe un ensemble de fonctions optimisées pour manipuler de gros jeux de données. Elle permet de créer et exporter des tables de données à partir de fichiers textes (séparateurs, .csv, format fixe, compressés), binaires (HDF5 avec Pytable), HTML, XML, JSON, MongoDB, SQL&hellip;
Une nouvelle structure de donnée est utilisée avec cette bibliothèque: le DataFrame . Il existe deux types de données avec pandas: les séries et les dataframes.">

  
  <link rel="alternate" hreflang="en-us" href="/courses/formation_python/8-pandas/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/courses/formation_python/8-pandas/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="GDueymes">
  <meta property="og:url" content="/courses/formation_python/8-pandas/">
  <meta property="og:title" content="8- La lirairie Pandas - Cours | GDueymes">
  <meta property="og:description" content="La librairie Pandas: Pandas est une bibliothèque spécialisée dans la manipulation de données. Cette bibliothèque regroupe un ensemble de fonctions optimisées pour manipuler de gros jeux de données. Elle permet de créer et exporter des tables de données à partir de fichiers textes (séparateurs, .csv, format fixe, compressés), binaires (HDF5 avec Pytable), HTML, XML, JSON, MongoDB, SQL&hellip;
Une nouvelle structure de donnée est utilisée avec cette bibliothèque: le DataFrame . Il existe deux types de données avec pandas: les séries et les dataframes."><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2019-05-05T00:00:00&#43;01:00">
    
    <meta property="article:modified_time" content="2019-05-05T00:00:00&#43;01:00">
  

  



  


  


  





  <title>8- La lirairie Pandas - Cours | GDueymes</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    
    
      <a class="navbar-brand" href="/">GDueymes</a>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/courses/"><span>Courses</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/Guillaume_Dueymes2019.pdf"><span>CV</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      





  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/formation_python/">Overview</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/formation_python/1-introduction/">Formation en Python</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/courses/formation_python/1-introduction/">1- Introduction</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/2-les_bases/">2- Les bases du language Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/2-les_bases-exercice/">2- Les bases du language Python - Exercices</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/3-les_listes/">3- Les listes en Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/3-les_listes-exercice/">3- Les listes en Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/4-les_dictionnaires/">4- Les dictionnaires en Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/4-les_dictionnaires-exercice/">4- Les dictionnaires en Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/5-les_boucles/">5- Les boucles en Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/5-les_boucles-exercice/">5- Les boucles en Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/6-les_fonctions/">6- Les fonctions en Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/6-les_fonctions-exercice/">6- Les fonctions en Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/7-numpy/">7- La librairie Numpy - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/7-numpy-exercice/">7- La librairie Numpy - Exercice</a>
      </li>
      
      <li class="active">
        <a href="/courses/formation_python/8-pandas/">8- La lirairie Pandas - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/8-pandas-exercice/">8- La librairie Pandas - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/9-visualisation/">9- La visualisation graphique avec Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/9-visualisation-exercice/">9- La visualisation graphique avec Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/project1-eccc_temperature/">9.1- Projet sur les données de températures ECCC</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/project2-eccc_precipitation/">9.2- Projet sur les données de précipitations ECCC</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/10-api-cours/">10- Travailler avec des API sous Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/10-api-exercices/">10- Travailler avec des API sous Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/11-web-scraping-cours/">11- Web Scrapping - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/11-web-scraping-exercices/">11- Web scrapping - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/12-requeter-une-base-sql-cours/">12- SQL et Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/12-requeter-une-base-sql-exercices/">12- SQL et Python - Exercice</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/13-regex-cours/">13- Regex et Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/14-statistique-descriptive-cours/">14- La statistique descriptive - Rappels</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/15.1-netcdf_tutorial/">15-1- Le format Netcdf sous Python - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/15.2-cartopy_library/">15-2- La librairie Cartopy - Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/15.3-xarray_library/">15-3 La librairie Xarray- Cours</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/16-1-niveau_facile/">16.1- Exercices Python - Niveau facile</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/16-2-niveau_intermediaire/">16.2- Exercices Python - Niveau intermédiaire</a>
      </li>
      
      <li >
        <a href="/courses/formation_python/16-3-niveau-difficile/">16.3- Exercices Python - Niveau difficile</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#la-librairie-pandas">La librairie Pandas:</a></li>
    <li><a href="#--introduction-sur-les-séries--">- Introduction sur les séries -</a></li>
    <li><a href="#8--les-dataframes">8- Les dataframes:</a></li>
    <li><a href="#81--création-dun-dataframe">8.1- Création d&rsquo;un Dataframe:</a></li>
    <li><a href="#811--création-dun-dataframe-à-partir-dun-array-numpy">8.1.1- Création d&rsquo;un DataFrame à partir d&rsquo;un array Numpy:</a></li>
    <li><a href="#812--création-dun-dataframe-à-partir-de-series">8.1.2- Création d&rsquo;un DataFrame à partir de series:</a></li>
    <li><a href="#813--création-dun-dataframe-à-partir-dun-fichier-csv-fonctions-bread_tableb-ou-bread_csv">8.1.3- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier csv: fonctions <!-- raw HTML omitted -->read_table()<!-- raw HTML omitted --> ou <!-- raw HTML omitted -->read_csv():</a></li>
    <li><a href="#814--création-dun-dataframe-à-partir-dun-fichier-txt">8.1.4- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier txt:</a></li>
    <li><a href="#815--création-dun-dataframe-à-partir-dun-fichier-excell-ou-xls-fonction-bread_excelb">8.1.5- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier excell ou (.xls): fonction <!-- raw HTML omitted -->read_excel()<!-- raw HTML omitted --></a></li>
    <li><a href="#83--naviguer-dans-un-dataframe-et-accéder-aux-éléments">8.3- Naviguer dans un Dataframe et accéder aux éléments:</a></li>
    <li><a href="#831---la-méthode-iloc">8.3.1-  La méthode iloc()</a></li>
    <li><a href="#832---la-méthode-loc">8.3.2-  La méthode loc():</a></li>
    <li><a href="#833---faire-des-boucles-dans-un-dataframe">8.3.3-  Faire des boucles dans un dataframe:</a></li>
    <li><a href="#84--data-cleaning-dun-dataframe">8.4- &ldquo;Data cleaning&rdquo; d&rsquo;un dataframe:</a></li>
    <li><a href="#85---modifier-un-dataframe-et-introduction-au-feature-modeling">8.5-  Modifier un DataFrame et introduction au &ldquo;feature modeling&rdquo;:</a></li>
    <li><a href="#851---création-dune-variable-depuis-un-dataframe">8.5.1-  Création d&rsquo;une variable depuis un DataFrame:</a></li>
    <li><a href="#852--ajout-dune-variable-dans-un-dataframe">8.5.2- Ajout d&rsquo;une variable dans un DataFrame:</a></li>
    <li><a href="#853--suppression-dune-variable-dans-un-dataframe">8.5.3- Suppression d&rsquo;une variable dans un DataFrame:</a></li>
    <li><a href="#854--appliquer-des-fonctions">8.5.4- Appliquer des fonctions:</a></li>
    <li><a href="#8541--la-méthode-bapplyb">8.5.4.1- La méthode <!-- raw HTML omitted -->.apply()<!-- raw HTML omitted -->:</a></li>
    <li><a href="#855--filtrer-des-données">8.5.5- Filtrer des données:</a></li>
    <li><a href="#856--grouper-un-dataframe-sur-une-ou-plusieurs-colonnes-groupby">8.5.6- Grouper un DataFrame sur une ou plusieurs colonnes (groupby):</a></li>
    <li><a href="#8561--fractionner-les-données-en-groupes">8.5.6.1- Fractionner les données en groupes:</a></li>
    <li><a href="#8562--itérer-au-travers-des--groupes">8.5.6.2- Itérer au travers des  groupes:</a></li>
    <li><a href="#8563--fonctions-dites-dagrégation">8.5.6.3- Fonctions dites d&rsquo;agrégation:</a></li>
    <li><a href="#8564---appliquer-plusieurs-fonctions">8.5.6.4-  Appliquer plusieurs fonctions:</a></li>
    <li><a href="#8565--transformations">8.5.6.5- Transformations:</a></li>
    <li><a href="#8566--filtration">8.5.6.6- Filtration:</a></li>
    <li><a href="#86---rassembler-plusieurs-dataframes">8.6-  Rassembler plusieurs Dataframes:</a></li>
    <li><a href="#861--jointure-de-dataframes">8.6.1- Jointure de DataFrames:</a></li>
    <li><a href="#8611---assembler-deux-dataframes-sur-une-clé">8.6.1.1-  Assembler deux DataFrames sur une clé:</a></li>
    <li><a href="#8612---fusionner-deux-dataframes-en-utilisant-largument-how">8.6.1.2-  Fusionner deux DataFrames en utilisant l&rsquo;argument &lsquo;How&rsquo;:</a></li>
    <li><a href="#862--concatenation-de-dataframes">8.6.2- Concatenation de DataFrames:</a></li>
    <li><a href="#concaténation-avec-append">Concaténation avec append</a></li>
    <li><a href="#9---sauver-un-dataframe">9-  Sauver un DataFrame:</a></li>
    <li><a href="#10--les-dates">10- Les dates:</a></li>
    <li><a href="#111--la-classe-bdatetimeb-du-module-datetime">11.1- La classe <!-- raw HTML omitted -->datetime<!-- raw HTML omitted --> du module datetime:</a></li>
    <li><a href="#1111--création-dun-objet-datetime">11.1.1- Création d&rsquo;un objet datetime:</a></li>
    <li><a href="#1112--manipuler-un-objet-datetime">11.1.2- Manipuler un objet datetime:</a></li>
    <li><a href="#13--bonus--modifier-le-paramétrage-de-pandas">13- bonus : modifier le paramétrage de pandas:</a></li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          <h1>8- La lirairie Pandas - Cours</h1>

          <div class="article-style">
            <p><img src="/img/pandas.png" alt="image0"></p>
<h2 id="la-librairie-pandas">La librairie Pandas:</h2>
<p>Pandas est une bibliothèque spécialisée dans la manipulation de données. 
Cette bibliothèque regroupe un ensemble de fonctions optimisées pour manipuler de gros jeux de données.
Elle permet de créer et exporter des tables de données à partir de fichiers textes (séparateurs, .csv, format fixe, compressés), binaires (HDF5 avec Pytable), HTML, XML, JSON, MongoDB, SQL&hellip;</p>
<p>Une nouvelle structure de donnée est utilisée avec cette bibliothèque: le DataFrame . 
Il existe deux types de données avec pandas: les séries et les dataframes.</p>
<ul>
<li>
<p>Un dataframe est un tableau qui est crée avec des dictionnaires ou des listes</p>
</li>
<li>
<p>Ils sont basés sur des tableaux Numpy ou ndarray</p>
</li>
<li>
<p>Ils peuvent avoir des noms de colonnes et des noms de lignes</p>
</li>
<li>
<p>Ils ont la particularité de pouvoir mélanger les types de données: str, float, Nan, Int&hellip;</p>
</li>
<li>
<p>On peut les visualiser comme une feuille excell mais avec un nombre important de volumes de données ainsi qu&rsquo;un nombre importants de fonctions et attributs.</p>
</li>
</ul>
<h2 id="--introduction-sur-les-séries--">- Introduction sur les séries -</h2>
<p>Une série est un objet unidimensionnel. Les séries représentent les valeurs d&rsquo;une variable statistique. 
Variables quantitatives ou des variables qualitatives.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># on va charger la librairie pandas </span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd      <span style="color:#75715e"># création d&#39;un alias pour alléger les codes </span>
</code></pre></div><p>On va créer une série. On peut soit utiliser des listes, soit des dictionnaires.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">11</span>,<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">13</span>,<span style="color:#ae81ff">14</span>])
<span style="color:#66d9ef">print</span>(serie)
</code></pre></div><pre><code>0    11
1    15
2    12
3    13
4    14
dtype: int64
</code></pre>
<p>Nous avons dans les séries, les index et les valeurs. On peut remplacer ces index par du texte avec l&rsquo;option index. Attention, le nombre d&rsquo;index doit correspondre au nombre de valeurs.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">11</span>,<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">13</span>,<span style="color:#ae81ff">14</span>], index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Montréal&#34;</span>, <span style="color:#e6db74">&#34;Ottawa&#34;</span>, <span style="color:#e6db74">&#34;Toronto&#34;</span>, <span style="color:#e6db74">&#34;Gatineau&#34;</span>, <span style="color:#e6db74">&#34;Québec&#34;</span>])
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(serie)
</code></pre></div><pre><code>Montréal    11
Ottawa      15
Toronto     12
Gatineau    13
Québec      14
dtype: int64
</code></pre>
<p>La méthode describe() nous donne la distribution de nos données dans la série.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie<span style="color:#f92672">.</span>describe()
</code></pre></div><pre><code>count     5.000000
mean     13.000000
std       1.581139
min      11.000000
25%      12.000000
50%      13.000000
75%      14.000000
max      15.000000
dtype: float64
</code></pre>
<p>On peut accéder à une valeur en utilisant l&rsquo;index.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie[<span style="color:#e6db74">&#34;Montréal&#34;</span>]
</code></pre></div><pre><code>11
</code></pre>
<p>Mais on peut toujours utiliser le numéro de l&rsquo;index.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie[<span style="color:#ae81ff">3</span>]
</code></pre></div><pre><code>13
</code></pre>
<p>On peut accéder à plusieurs index.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie[[<span style="color:#e6db74">&#34;Montréal&#34;</span>, <span style="color:#e6db74">&#34;Québec&#34;</span>, <span style="color:#e6db74">&#34;Toronto&#34;</span>]]
</code></pre></div><pre><code>Montréal    11
Québec      14
Toronto     12
dtype: int64
</code></pre>
<p>Il exite d&rsquo;autres méthodes intéressantes pour faire des calculs sur la série.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie<span style="color:#f92672">.</span>min()
</code></pre></div><pre><code>11
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie<span style="color:#f92672">.</span>max()
</code></pre></div><pre><code>15
</code></pre>
<p>On peut utiliser des opérateurs de comparaison.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie[serie<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">12</span>]
</code></pre></div><pre><code>Ottawa      15
Gatineau    13
Québec      14
dtype: int64
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">serie<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">12</span> <span style="color:#75715e"># c est l&#39;ensemble de booléens.</span>
</code></pre></div><pre><code>Montréal    False
Ottawa       True
Toronto     False
Gatineau     True
Québec       True
dtype: bool
</code></pre>
<h2 id="8--les-dataframes">8- Les dataframes:</h2>
<p>Un dataframe est un tableau avec des observations ou individus sur les lignes et des attributs sur les colonnes qui décrivent les individus.</p>
<p>Un DataFrame est une structure de données tabulaire bidimensionnelle à taille variable, potentiellement hétérogène avec des axes étiquetés (lignes et colonnes).</p>
<p><img src="/img/formation/dataframe_shadow.png" alt="image0"></p>
<p>Les attributs peuvent être soit qualitatif soit quantitatif.</p>
<h2 id="81--création-dun-dataframe">8.1- Création d&rsquo;un Dataframe:</h2>
<p>Dans le monde réel, un DataFrame sera créé en chargeant les jeux de données à partir du stockage existant, le stockage peut être par exemple une base de données SQL, un fichier CSV ou un fichier Excel.</p>
<p>Le DataFrame peut aussi être créé à partir de listes, d&rsquo;un dictionnaire et d&rsquo;une liste de dictionnaires, etc.</p>
<p>Voici quelques façons de créer un dataframe:</p>
<h2 id="811--création-dun-dataframe-à-partir-dun-array-numpy">8.1.1- Création d&rsquo;un DataFrame à partir d&rsquo;un array Numpy:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np  <span style="color:#75715e"># on importe la librairie numpy</span>
stations <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>genfromtxt(<span style="color:#e6db74">&#34;./DATA/DATA_Barrage_1963_2017_5.csv&#34;</span>, delimiter<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;,&#34;</span>, dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;float&#39;</span>)   <span style="color:#75715e"># on assigne une variable. </span>
stations
</code></pre></div><pre><code>array([[  39.7       ,   39.09      ,   39.55645161,   23.23      ,
          22.5       ,   22.85903226, 2390.52612903, 3164.97      ,
        1673.8       ],
       [  41.16      ,   40.96      ,   41.08806452,   23.22      ,
          22.43      ,   22.7583871 , 2227.28290323, 3008.18      ,
        1697.87      ],
       [  41.15      ,   41.05      ,   41.11322581,   23.35      ,
          22.87      ,   23.15548387, 2851.27419355, 3231.8       ,
        2367.85      ],
       [  41.09      ,   40.61      ,   40.9683871 ,   23.78      ,
          22.7       ,   23.03258065, 2635.03774194, 3967.33      ,
        2069.65      ],
       [  41.09      ,   39.6       ,   40.26967742,   24.24      ,
          22.87      ,   23.64580645, 3924.23451613, 5407.32      ,
        2417.89      ]])
</code></pre>
<p>Pour créer le dataframe, on utilise la fonction <!-- raw HTML omitted -->DataFrame()<!-- raw HTML omitted --> de pandas. C&rsquo;est à cette étape qu&rsquo;on définit le nom de nos colonnes.  En entrée on met le tableau Numpy .</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(stations, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Amont Max&#34;</span>, <span style="color:#e6db74">&#34;Amont Min&#34;</span>, <span style="color:#e6db74">&#34;Amont Moyen&#34;</span>, <span style="color:#e6db74">&#34;Aval Max&#34;</span>, <span style="color:#e6db74">&#34;Aval Max&#34;</span>, <span style="color:#e6db74">&#34;Aval Moyen&#34;</span>, <span style="color:#e6db74">&#34;Debit Moyen&#34;</span>, <span style="color:#e6db74">&#34;Debit Max&#34;</span>,<span style="color:#e6db74">&#34;Debit Min&#34;</span>])
dataframe
</code></pre></div><pre><code>|    |   Amont Max |   Amont Min |   Amont Moyen |   Aval Max |   Aval Max |   Aval Moyen |   Debit Moyen |   Debit Max |   Debit Min |
|---:|------------:|------------:|--------------:|-----------:|-----------:|-------------:|--------------:|------------:|------------:|
|  0 |       39.7  |       39.09 |       39.5565 |      23.23 |      22.5  |      22.859  |       2390.53 |     3164.97 |     1673.8  |
|  1 |       41.16 |       40.96 |       41.0881 |      23.22 |      22.43 |      22.7584 |       2227.28 |     3008.18 |     1697.87 |
|  2 |       41.15 |       41.05 |       41.1132 |      23.35 |      22.87 |      23.1555 |       2851.27 |     3231.8  |     2367.85 |
|  3 |       41.09 |       40.61 |       40.9684 |      23.78 |      22.7  |      23.0326 |       2635.04 |     3967.33 |     2069.65 |
|  4 |       41.09 |       39.6  |       40.2697 |      24.24 |      22.87 |      23.6458 |       3924.23 |     5407.32 |     2417.89 |
</code></pre>
<h2 id="812--création-dun-dataframe-à-partir-de-series">8.1.2- Création d&rsquo;un DataFrame à partir de series:</h2>
<p>On a vu précédemment comment créer une Série. On peut s&rsquo;en servir pour créer des Dataframes.</p>
<p>Lors de la création d&rsquo;un DataFrame, chaque série définira une colonne.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># on crée une première série </span>
groupe1<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">11</span>,<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">13</span>], index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Fred&#34;</span>, <span style="color:#e6db74">&#34;Jeanne&#34;</span>, <span style="color:#e6db74">&#34;Julie&#34;</span>, <span style="color:#e6db74">&#34;Julien&#34;</span>])
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">groupe1
</code></pre></div><pre><code>Fred      11
Jeanne    15
Julie     12
Julien    13
dtype: int64
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># on crée une deuxième série mais avec des nouveaux élèves en plus et des élèves absents.   </span>
groupe2<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>Series([<span style="color:#ae81ff">11</span>,<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">11</span>], index<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Fred&#34;</span>, <span style="color:#e6db74">&#34;Jeanne&#34;</span>, <span style="color:#e6db74">&#34;Damien&#34;</span>, <span style="color:#e6db74">&#34;Samuel&#34;</span>])
</code></pre></div><p>On crée notre DataFrame avec nos deux séries. 
Pour cela on utilise des dictionnaire pour créer un dataframe avec des séries, donc on utilise des {}, avec des clés et des valeurs.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#34;Groupe1&#34;</span> : groupe1, <span style="color:#e6db74">&#34;Groupe2&#34;</span> : groupe2})
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe
</code></pre></div><pre><code>|        |   Groupe1 |   Groupe2 |
|:-------|----------:|----------:|
| Damien |       nan |        15 |
| Fred   |        11 |        11 |
| Jeanne |        15 |        15 |
| Julie  |        12 |       nan |
| Julien |        13 |       nan |
| Samuel |       nan |        11 |
</code></pre>
<p>NaN: la valeur n&rsquo;est pas disponible.</p>
<h2 id="813--création-dun-dataframe-à-partir-dun-fichier-csv-fonctions-bread_tableb-ou-bread_csv">8.1.3- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier csv: fonctions <!-- raw HTML omitted -->read_table()<!-- raw HTML omitted --> ou <!-- raw HTML omitted -->read_csv():</h2>
<ul>
<li><!-- raw HTML omitted -->read_table()<!-- raw HTML omitted --> et <!-- raw HTML omitted -->read_csv()<!-- raw HTML omitted --> sont les fonctions les plus utiles sous Pandas pour lire des fichiers textes et générer un objet de type DataFrame.</li>
</ul>
<p>On va travailler avec un jeu de données issu d&rsquo;un barrage hydraulique.</p>
<p>Notre fichier csv possède 9 variables, la première ligne nous renvoie les noms des variables (ou labels).</p>
<p>On peut lire un document csv avec la fonction <!-- raw HTML omitted -->read_table()<!-- raw HTML omitted --> , en mettant en attribut le séparateur &ldquo;,&quot;.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">barrage <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_table(<span style="color:#e6db74">&#34;./DATA/DATA_EXTREME_Carillon_1963_2017_5.csv&#34;</span>, sep<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;,&#34;</span>)
barrage<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|    |   Amont_max |   Amont_min |   Amont_moyen |   Aval_max |   Aval_min |   Aval_moyen |   Debit_Moyen |   Debit_max |   Debit_min |
|---:|------------:|------------:|--------------:|-----------:|-----------:|-------------:|--------------:|------------:|------------:|
|  0 |       39.7  |       39.09 |       39.5565 |      23.23 |      22.5  |      22.859  |       2390.53 |     3164.97 |     1673.8  |
|  1 |       41.16 |       40.96 |       41.0881 |      23.22 |      22.43 |      22.7584 |       2227.28 |     3008.18 |     1697.87 |
|  2 |       41.15 |       41.05 |       41.1132 |      23.35 |      22.87 |      23.1555 |       2851.27 |     3231.8  |     2367.85 |
|  3 |       41.09 |       40.61 |       40.9684 |      23.78 |      22.7  |      23.0326 |       2635.04 |     3967.33 |     2069.65 |
|  4 |       41.09 |       39.6  |       40.2697 |      24.24 |      22.87 |      23.6458 |       3924.23 |     5407.32 |     2417.89 |


D:\Utilisateurs\guillaume\Anaconda3\lib\site-packages\ipykernel_launcher.py:1: FutureWarning: read_table is deprecated, use read_csv instead.
  &quot;&quot;&quot;Entry point for launching an IPython kernel.
</code></pre>
<p>Cependant, si on sait que notre fichier à lire est un csv, on peut utiliser une fonction plus simple de Pandas qui est <!-- raw HTML omitted -->read_csv()<!-- raw HTML omitted -->.</p>
<p>Pas besoin de l&rsquo;option sep=&rsquo;&rsquo; . Il trouvera le séparateur par défault.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">barrage <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/DATA_EXTREME_Carillon_1963_2017_5.csv&#34;</span>)

barrage<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|    |   Amont_max |   Amont_min |   Amont_moyen |   Aval_max |   Aval_min |   Aval_moyen |   Debit_Moyen |   Debit_max |   Debit_min |
|---:|------------:|------------:|--------------:|-----------:|-----------:|-------------:|--------------:|------------:|------------:|
|  0 |       39.7  |       39.09 |       39.5565 |      23.23 |      22.5  |      22.859  |       2390.53 |     3164.97 |     1673.8  |
|  1 |       41.16 |       40.96 |       41.0881 |      23.22 |      22.43 |      22.7584 |       2227.28 |     3008.18 |     1697.87 |
|  2 |       41.15 |       41.05 |       41.1132 |      23.35 |      22.87 |      23.1555 |       2851.27 |     3231.8  |     2367.85 |
|  3 |       41.09 |       40.61 |       40.9684 |      23.78 |      22.7  |      23.0326 |       2635.04 |     3967.33 |     2069.65 |
|  4 |       41.09 |       39.6  |       40.2697 |      24.24 |      22.87 |      23.6458 |       3924.23 |     5407.32 |     2417.89 |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#help(pd.read_csv)</span>
</code></pre></div><p>Plusieurs options sont mises à disposition de la fonction read_csv(). Il est important de connaître la liste des possibilités et options offertes par cette simple commande.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">file1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;./DATA/DATA_EXTREME_Carillon_1963_2017_5.csv&#34;</span>
col_names <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Variable1&#39;</span>, <span style="color:#e6db74">&#39;Variable2&#39;</span>, <span style="color:#e6db74">&#39;Variable3&#39;</span>]
df2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(file1, skiprows<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, usecols<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>], names<span style="color:#f92672">=</span>col_names)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
df2<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|    |   Variable1 |   Variable2 |   Variable3 |
|---:|------------:|------------:|------------:|
|  0 |       39.7  |       39.09 |       23.23 |
|  1 |       41.16 |       40.96 |       23.22 |
|  2 |       41.15 |       41.05 |       23.35 |
|  3 |       41.09 |       40.61 |       23.78 |
|  4 |       41.09 |       39.6  |       24.24 |
</code></pre>
<h2 id="814--création-dun-dataframe-à-partir-dun-fichier-txt">8.1.4- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier txt:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;./DATA/Daily_Precipitation_1963-2017.txt&#39;</span>, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> file:
        rows <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span>read()      
dataset <span style="color:#f92672">=</span> [float(row) <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> rows<span style="color:#f92672">.</span>split()]   
df3 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#34;Precipitation&#34;</span> : dataset})
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df3<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|    |   Precipitation |
|---:|----------------:|
|  0 |               0 |
|  1 |               0 |
|  2 |               0 |
|  3 |               0 |
|  4 |               0 |
</code></pre>
<h2 id="815--création-dun-dataframe-à-partir-dun-fichier-excell-ou-xls-fonction-bread_excelb">8.1.5- Création d&rsquo;un DataFrame à partir d&rsquo;un fichier excell ou (.xls): fonction <!-- raw HTML omitted -->read_excel()<!-- raw HTML omitted --></h2>
<p>Nous allons ouvrir ici un fichier excell (d&rsquo;extension .xls). Ce fichier est une base de données contenant de l&rsquo;information sur toutes les stations homogénéisées de température d&rsquo;Environnement et Changement Climatique Canada.</p>
<p>Cette base de données présente 11 colonnes avec des données commençant à la 4 ème ligne.</p>
<p>On va définir la colonne Province comme index de notre DataFrame.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df4 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#34;./DATA/Homog_Temperature_Stations.xls&#34;</span>, index_col<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,skiprows <span style="color:#f92672">=</span> range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>))
<span style="color:#f92672">from</span> tabulate <span style="color:#f92672">import</span> tabulate
<span style="color:#66d9ef">print</span>(tabulate(df4<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<!-- raw HTML omitted -->
<p>Une fois le dataframe crée, on peut appliquer quelques fonctions et méthodes pour effectuer une première exploration du jeu de données.</p>
<p>Il existe plusieurs fonctions, méthodes ou attributs qu&rsquo;on peut appliquer sur les DataFrame:</p>
<p><a href="https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.DataFrame.html">https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.DataFrame.html</a></p>
<p>Nous allons présenter quelques fonctions utiles lors de l&rsquo;exploration d&rsquo;un jeu de données.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/Climato_Stations_ECCC_1981_2010_YEAR.csv&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;latin-1&#39;</span>)
<span style="color:#f92672">from</span> tabulate <span style="color:#f92672">import</span> tabulate
<span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |      Tmax |   Tmax90p |      Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|----------:|----------:|----------:|----------:|---------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              | nan       |  nan      | nan       | nan       |  nan     |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |   5.63043 |   18.9033 |  -3.46052 | -19.235   |  860.083 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              | nan       |  nan      | nan       | nan       |  nan     |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |  12.628   |   23.6417 |   4.01748 |  -3.646   | 1798.09  |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 | N              |  12.1556  |   20.2007 |   6.77689 |   1.09467 | 2518.68  |
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.info()<!-- raw HTML omitted --> :</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>info()
</code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 289 entries, 0 to 288
Data columns (total 17 columns):
Unnamed: 0        289 non-null int64
Prov              289 non-null object
Nom de station    289 non-null object
stnid             289 non-null object
année déb.        289 non-null int64
mois déb.         289 non-null int64
année fin.        289 non-null int64
mois fin.         289 non-null int64
lat (deg)         289 non-null float64
long (deg)        289 non-null float64
élév (m)          289 non-null int64
stns jointes      289 non-null object
Tmax              172 non-null float64
Tmax90p           172 non-null float64
Tmin              171 non-null float64
Tmin10p           171 non-null float64
DG0               171 non-null float64
dtypes: float64(7), int64(6), object(4)
memory usage: 38.5+ KB
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.dtypes()<!-- raw HTML omitted -->:  nous fournit les types de variables de notre DataFrame.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>dtypes
</code></pre></div><pre><code>Unnamed: 0          int64
Prov               object
Nom de station     object
stnid              object
année déb.          int64
mois déb.           int64
année fin.          int64
mois fin.           int64
lat (deg)         float64
long (deg)        float64
élév (m)            int64
stns jointes       object
Tmax              float64
Tmax90p           float64
Tmin              float64
Tmin10p           float64
DG0               float64
dtype: object
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>Prov<span style="color:#f92672">.</span>dtypes
</code></pre></div><pre><code>dtype('O')
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.shape<!-- raw HTML omitted --> : retourne un tuple sur la dimension de notre DataFrame</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>shape <span style="color:#75715e"># nous avons donc 289 lignes et 17 colonnes dans notre base de données.</span>
</code></pre></div><pre><code>(289, 17)
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.columns<!-- raw HTML omitted -->: retourne les noms des colonnes de notre DataFrame</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>columns
</code></pre></div><pre><code>Index(['Unnamed: 0', 'Prov', 'Nom de station', 'stnid', 'année déb.',
       'mois déb.', 'année fin.', 'mois fin.', 'lat (deg)', 'long (deg)',
       'élév (m)', 'stns jointes', 'Tmax', 'Tmax90p', 'Tmin', 'Tmin10p',
       'DG0'],
      dtype='object')
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.isnull<!-- raw HTML omitted -->:  nous informe si la valeur est NaN ou non</li>
</ul>
<p>On va imbriquer deux méthodes pour connaître le nombre de valeurs manquantes.</p>
<pre><code>- .isnull(): nous informe si la valeur est NaN ou non 

- .sum(): effectue la somme. 
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum() <span style="color:#75715e"># information sur la somme des NaN par catégorie</span>
</code></pre></div><pre><code>Unnamed: 0          0
Prov                0
Nom de station      0
stnid               0
année déb.          0
mois déb.           0
année fin.          0
mois fin.           0
lat (deg)           0
long (deg)          0
élév (m)            0
stns jointes        0
Tmax              117
Tmax90p           117
Tmin              118
Tmin10p           118
DG0               118
dtype: int64
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.describe()<!-- raw HTML omitted -->:  permet d&rsquo;avoir un apperçu de notre DataFrame</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>describe()
</code></pre></div><pre><code>|       |   Unnamed: 0 |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |      Tmax |   Tmax90p |       Tmin |   Tmin10p |       DG0 |
|:------|-------------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|----------:|----------:|-----------:|----------:|----------:|
| count |     289      |     289      |   289       |     289      |   289       |   289       |     289      |    289     | 172       | 172       | 171        | 171       |  171      |
| mean  |     144      |    1919.32   |     5.77509 |    2016.55   |    10.8166  |    52.7494  |     -96.5974 |    338.315 |   7.91631 |  23.565   |  -2.27754  | -18.6113  | 1397.74   |
| std   |      83.5713 |      23.9921 |     3.60092 |       1.3012 |     2.58285 |     7.34345 |      23.6708 |    314.664 |   5.52463 |   4.39633 |   5.25505  |   9.05387 |  544.373  |
| min   |       0      |    1840      |     1       |    2006      |     1       |    42.03    |    -140.2    |      2     | -15.3665  |   4.74167 | -21.9351   | -42.8867  |   58.6167 |
| 25%   |      72      |    1905      |     2       |    2017      |    12       |    48.33    |    -116.98   |     64     |   7.36465 |  22.5659  |  -4.03064  | -23.6402  | 1106.85   |
| 50%   |     144      |    1916      |     6       |    2017      |    12       |    50.7     |     -99.28   |    251     |   8.98805 |  24.5307  |  -2.2296   | -19.8553  | 1366.14   |
| 75%   |     216      |    1940      |     9       |    2017      |    12       |    54.82    |     -75.55   |    546     |  11.0182  |  26.0746  |   0.691542 | -12.6338  | 1676.23   |
| max   |     288      |    1960      |    12       |    2017      |    12       |    82.5     |     -52.75   |   1580     |  16.1055  |  30.8767  |   7.01629  |   1.949   | 2807.09   |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>describe(include<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;all&#34;</span>)
</code></pre></div><pre><code>|        |   Unnamed: 0 | Prov   | Nom de station   | stnid   |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |      Tmax |   Tmax90p |       Tmin |   Tmin10p |       DG0 |
|:-------|-------------:|:-------|:-----------------|:--------|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|----------:|----------:|-----------:|----------:|----------:|
| count  |     289      | 289    | 289              | 289     |     289      |   289       |     289      |   289       |   289       |     289      |    289     | 289            | 172       | 172       | 171        | 171       |  171      |
| unique |     nan      | 14     | 288              | 289     |     nan      |   nan       |     nan      |   nan       |   nan       |     nan      |    nan     | 2              | nan       | nan       | nan        | nan       |  nan      |
| top    |     nan      | BC     | WOODSTOCK        | 250M001 |     nan      |   nan       |     nan      |   nan       |   nan       |     nan      |    nan     | Y              | nan       | nan       | nan        | nan       |  nan      |
| freq   |     nan      | 51     | 2                | 1       |     nan      |   nan       |     nan      |   nan       |   nan       |     nan      |    nan     | 224            | nan       | nan       | nan        | nan       |  nan      |
| mean   |     144      | nan    | nan              | nan     |    1919.32   |     5.77509 |    2016.55   |    10.8166  |    52.7494  |     -96.5974 |    338.315 | nan            |   7.91631 |  23.565   |  -2.27754  | -18.6113  | 1397.74   |
| std    |      83.5713 | nan    | nan              | nan     |      23.9921 |     3.60092 |       1.3012 |     2.58285 |     7.34345 |      23.6708 |    314.664 | nan            |   5.52463 |   4.39633 |   5.25505  |   9.05387 |  544.373  |
| min    |       0      | nan    | nan              | nan     |    1840      |     1       |    2006      |     1       |    42.03    |    -140.2    |      2     | nan            | -15.3665  |   4.74167 | -21.9351   | -42.8867  |   58.6167 |
| 25%    |      72      | nan    | nan              | nan     |    1905      |     2       |    2017      |    12       |    48.33    |    -116.98   |     64     | nan            |   7.36465 |  22.5659  |  -4.03064  | -23.6402  | 1106.85   |
| 50%    |     144      | nan    | nan              | nan     |    1916      |     6       |    2017      |    12       |    50.7     |     -99.28   |    251     | nan            |   8.98805 |  24.5307  |  -2.2296   | -19.8553  | 1366.14   |
| 75%    |     216      | nan    | nan              | nan     |    1940      |     9       |    2017      |    12       |    54.82    |     -75.55   |    546     | nan            |  11.0182  |  26.0746  |   0.691542 | -12.6338  | 1676.23   |
| max    |     288      | nan    | nan              | nan     |    1960      |    12       |    2017      |    12       |    82.5     |     -52.75   |   1580     | nan            |  16.1055  |  30.8767  |   7.01629  |   1.949   | 2807.09   |
</code></pre>
<p>On peut faire directement des statistiques sur des variables quantitatives.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#34;Tmin&#34;</span>]<span style="color:#f92672">.</span>describe()
</code></pre></div><pre><code>count    171.000000
mean      -2.277538
std        5.255046
min      -21.935075
25%       -4.030637
50%       -2.229597
75%        0.691542
max        7.016292
Name: Tmin, dtype: float64
</code></pre>
<h2 id="83--naviguer-dans-un-dataframe-et-accéder-aux-éléments">8.3- Naviguer dans un Dataframe et accéder aux éléments:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#34;./DATA/Homog_Temperature_Stations.xls&#34;</span>, skiprows <span style="color:#f92672">=</span> range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>))
dataframe<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|    | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|---:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
|  0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
|  1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
|  2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
|  3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
|  4 | BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<p>Avant exploration d&rsquo;un Dataframe, on peut modifier l&rsquo;index pour faciliter l&rsquo;analyse d&rsquo;un jeu de données. Pour cela, on utilise la fonction <!-- raw HTML omitted -->.set_index()<!-- raw HTML omitted --> . On doit créer un nouvel objet.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#34;Prov&#34;</span>)<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index()
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<p>Pour accéder à un élément dans un dataframe, il existe deux méthodes:</p>
<ul>
<li>
<p>la méthode <!-- raw HTML omitted -->iloc()<!-- raw HTML omitted --> pour accéder aux données à partir des numéros d&rsquo;index</p>
</li>
<li>
<p>la méthode <!-- raw HTML omitted -->loc()<!-- raw HTML omitted --> pour accéder aux données à partir des labels</p>
</li>
</ul>
<p><img src="/img/formation/pandas_selection.png" alt="image0"></p>
<h2 id="831---la-méthode-iloc">8.3.1-  La méthode iloc()</h2>
<ul>
<li>iloc:  on veut les extraire les valeurs localiées à la colonne d&rsquo;index 1 et ligne d&rsquo;index 4 [row, column]</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">1</span>]      
</code></pre></div><pre><code>1060841
</code></pre>
<ul>
<li>iloc: pour accéder aux 4 premières lignes et toutes les colonnes de notre DataFrame.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">4</span>,:]
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
</code></pre>
<ul>
<li>iloc: pour accéder aux 4 premières colonnes et toutes les lignes de notre DataFrame.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">4</span>]
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |
|:-------|:-----------------|--------:|-------------:|------------:|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |
| BC     | ATLIN            | 1200560 |         1905 |           8 |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |
</code></pre>
<ul>
<li>Slicing sur les colonnes et les lignes: on veut les lignes d&rsquo;index 2 à 5 et les colonnes d&rsquo;index 3 à 8</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">8</span>]
</code></pre></div><pre><code>| Prov   |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |
|:-------|------------:|-------------:|------------:|------------:|-------------:|
| BC     |           2 |         2015 |           3 |       53.07 |      -121.52 |
| BC     |           1 |         2006 |           9 |       49.48 |      -119.05 |
| BC     |           5 |         2017 |          11 |       52.37 |      -126.68 |
</code></pre>
<h2 id="832---la-méthode-loc">8.3.2-  La méthode loc():</h2>
<ul>
<li>loc: On veut extraire pour accéder à toutes les valeurs d&rsquo;un index, utilisation du slicing.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#34;BC&#34;</span>,<span style="color:#e6db74">&#34;stnid&#34;</span>]
</code></pre></div><pre><code>Prov
BC    1100120
BC    1200560
BC    1090660
BC    1130771
BC    1060841
Name: stnid, dtype: object
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>loc[<span style="color:#e6db74">&#34;BC&#34;</span>,:]
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<ul>
<li>loc pour sélectionner toutes les lignes de 3 labels .</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index<span style="color:#f92672">.</span>loc[:,[<span style="color:#e6db74">&#34;Nom de station&#34;</span>, <span style="color:#e6db74">&#34;année déb.&#34;</span>, <span style="color:#e6db74">&#34;année fin.&#34;</span>]]<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>| Prov   | Nom de station   |   année déb. |   année fin. |
|:-------|:-----------------|-------------:|-------------:|
| BC     | AGASSIZ          |         1893 |         2017 |
| BC     | ATLIN            |         1905 |         2017 |
| BC     | BARKERVILLE      |         1888 |         2015 |
| BC     | BEAVERDELL       |         1939 |         2006 |
| BC     | BELLA COOLA      |         1895 |         2017 |
</code></pre>
<h2 id="833---faire-des-boucles-dans-un-dataframe">8.3.3-  Faire des boucles dans un dataframe:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">for</span> row_index,row <span style="color:#f92672">in</span> dataframe_Prov_index<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)<span style="color:#f92672">.</span>iterrows():
    <span style="color:#66d9ef">print</span> (row_index)
    <span style="color:#66d9ef">print</span>(row[<span style="color:#e6db74">&#39;année déb.&#39;</span>])
</code></pre></div><pre><code>BC
1893
BC
1905
BC
1888
BC
1939
BC
1895
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">for</span> key,value <span style="color:#f92672">in</span> dataframe_Prov_index<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">2</span>)<span style="color:#f92672">.</span>iteritems():
    <span style="color:#66d9ef">print</span>(key)
    <span style="color:#66d9ef">print</span>(value)
</code></pre></div><pre><code>Nom de station
Prov
BC    AGASSIZ
BC      ATLIN
Name: Nom de station, dtype: object
stnid
Prov
BC    1100120
BC    1200560
Name: stnid, dtype: object
année déb.
Prov
BC    1893
BC    1905
Name: année déb., dtype: int64
mois déb.
Prov
BC    1
BC    8
Name: mois déb., dtype: int64
année fin.
Prov
BC    2017
BC    2017
Name: année fin., dtype: int64
mois fin.
Prov
BC    12
BC    12
Name: mois fin., dtype: int64
lat (deg)
Prov
BC    49.25
BC    59.57
Name: lat (deg), dtype: float64
long (deg)
Prov
BC   -121.77
BC   -133.70
Name: long (deg), dtype: float64
élév (m)
Prov
BC     15
BC    674
Name: élév (m), dtype: int64
stns jointes
Prov
BC    N
BC    N
Name: stns jointes, dtype: object
</code></pre>
<h2 id="84--data-cleaning-dun-dataframe">8.4- &ldquo;Data cleaning&rdquo; d&rsquo;un dataframe:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/Climato_Stations_ECCC_1981_2010_YEAR.csv&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;latin-1&#39;</span>)

dataframe<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">3</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |      Tmax |   Tmax90p |      Tmin |   Tmin10p |     DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|----------:|----------:|----------:|----------:|--------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              | nan       |  nan      | nan       |   nan     | nan     |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |   5.63043 |   18.9033 |  -3.46052 |   -19.235 | 860.083 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              | nan       |  nan      | nan       |   nan     | nan     |
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.replace()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;N&#39;</span>,np<span style="color:#f92672">.</span>nan, inplace<span style="color:#f92672">=</span>True)

dataframe<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">3</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |      Tmax |   Tmax90p |      Tmin |   Tmin10p |     DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|----------:|----------:|----------:|----------:|--------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 |            nan | nan       |  nan      | nan       |   nan     | nan     |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |            nan |   5.63043 |   18.9033 |  -3.46052 |   -19.235 | 860.083 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 |            nan | nan       |  nan      | nan       |   nan     | nan     |
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.isnull()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">3</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 |   Prov |   Nom de station |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |   Tmax |   Tmax90p |   Tmin |   Tmin10p |   DG0 |
|---:|-------------:|-------:|-----------------:|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|-------:|----------:|-------:|----------:|------:|
|  0 |            0 |      0 |                0 |       0 |            0 |           0 |            0 |           0 |           0 |            0 |          0 |              1 |      1 |         1 |      1 |         1 |     1 |
|  1 |            0 |      0 |                0 |       0 |            0 |           0 |            0 |           0 |           0 |            0 |          0 |              1 |      0 |         0 |      0 |         0 |     0 |
|  2 |            0 |      0 |                0 |       0 |            0 |           0 |            0 |           0 |           0 |            0 |          0 |              1 |      1 |         1 |      1 |         1 |     1 |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum()
</code></pre></div><pre><code>Unnamed: 0          0
Prov                0
Nom de station      0
stnid               0
année déb.          0
mois déb.           0
année fin.          0
mois fin.           0
lat (deg)           0
long (deg)          0
élév (m)            0
stns jointes       65
Tmax              117
Tmax90p           117
Tmin              118
Tmin10p           118
DG0               118
dtype: int64
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum()<span style="color:#f92672">/</span>len(dataframe)
</code></pre></div><pre><code>Unnamed: 0        0.000000
Prov              0.000000
Nom de station    0.000000
stnid             0.000000
année déb.        0.000000
mois déb.         0.000000
année fin.        0.000000
mois fin.         0.000000
lat (deg)         0.000000
long (deg)        0.000000
élév (m)          0.000000
stns jointes      0.224913
Tmax              0.404844
Tmax90p           0.404844
Tmin              0.408304
Tmin10p           0.408304
DG0               0.408304
dtype: float64
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.fillna()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe<span style="color:#f92672">.</span>fillna(<span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |     Tmax |   Tmax90p |     Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|---------:|----------:|---------:|----------:|---------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | 0              |  0       |    0      |  0       |   0       |    0     |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | 0              |  5.63043 |   18.9033 | -3.46052 | -19.235   |  860.083 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | 0              |  0       |    0      |  0       |   0       |    0     |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              | 12.628   |   23.6417 |  4.01748 |  -3.646   | 1798.09  |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 | 0              | 12.1556  |   20.2007 |  6.77689 |   1.09467 | 2518.68  |
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.dropna()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe<span style="color:#f92672">.</span>dropna(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe<span style="color:#f92672">.</span>dropna(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |    Tmax |   Tmax90p |      Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|--------:|----------:|----------:|----------:|---------:|
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              | 12.628  |   23.6417 |  4.01748  |  -3.646   | 1798.09  |
|  5 |            5 | BC     | BLUE RIVER       | 1160899 |         1946 |           9 |         2017 |          12 |       52.13 |      -119.28 |        683 | Y              | 10.4408 |   25.9917 | -1.12501  | -12.5823  |  987.363 |
|  9 |            9 | BC     | COMOX            | 1021830 |         1935 |          11 |         2017 |          12 |       49.72 |      -124.9  |         26 | Y              | 13.7376 |   23.1023 |  6.42485  |  -0.526   | 2444.39  |
| 10 |           10 | BC     | CRANBROOK        | 1152105 |         1901 |           1 |         2017 |          12 |       49.62 |      -115.78 |        940 | Y              | 11.96   |   27.3203 |  0.403836 | -11.3553  | 1383.26  |
| 12 |           12 | BC     | DARFIELD         | 1162265 |         1913 |          12 |         2017 |          11 |       51.3  |      -120.18 |        412 | Y              | 12.8902 |   27.6917 |  1.82373  |  -8.12333 | 1525.71  |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>dtypes
</code></pre></div><pre><code>Unnamed: 0          int64
Prov               object
Nom de station     object
stnid              object
année déb.          int64
mois déb.           int64
année fin.          int64
mois fin.           int64
lat (deg)         float64
long (deg)        float64
élév (m)            int64
stns jointes       object
Tmax              float64
Tmax90p           float64
Tmin              float64
Tmin10p           float64
DG0               float64
dtype: object
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.map()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Tmax&#39;</span>] <span style="color:#f92672">=</span> dataframe[<span style="color:#e6db74">&#39;Tmax&#39;</span>]<span style="color:#f92672">.</span>map(int,na_action<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ignore&#39;</span>)
</code></pre></div><ul>
<li>La méthode <!-- raw HTML omitted -->.unique()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">len(dataframe[<span style="color:#e6db74">&#39;Prov&#39;</span>]<span style="color:#f92672">.</span>unique())
</code></pre></div><pre><code>14
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">multiple_unique</span>(liste):
    <span style="color:#66d9ef">if</span> len(liste) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        result <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>nan
    <span style="color:#66d9ef">elif</span> len(liste) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
        result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;unique&#39;</span>
    <span style="color:#66d9ef">else</span>:
        result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;multiples&#39;</span>
    <span style="color:#66d9ef">return</span> result
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Prov&#39;</span>] <span style="color:#f92672">=</span> multiple_unique(dataframe[<span style="color:#e6db74">&#39;Prov&#39;</span>])
dataframe[<span style="color:#e6db74">&#39;Prov&#39;</span>]<span style="color:#f92672">.</span>unique()
<span style="color:#75715e">#Ne fonctionne pas car il prend toute la colonne en tant que liste</span>
</code></pre></div><pre><code>array(['multiples'], dtype=object)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;uniq&#39;</span>] <span style="color:#f92672">=</span> dataframe[<span style="color:#e6db74">&#39;Prov&#39;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: multiple_unique(x))
dataframe[<span style="color:#e6db74">&#39;uniq&#39;</span>]<span style="color:#f92672">.</span>value_counts()
</code></pre></div><pre><code>multiples    289
Name: uniq, dtype: int64
</code></pre>
<ul>
<li>La méthode <!-- raw HTML omitted -->.sort_values()<!-- raw HTML omitted --> :</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe<span style="color:#f92672">.</span>sort_values([<span style="color:#e6db74">&#39;Prov&#39;</span>] ,ascending<span style="color:#f92672">=</span>False)<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov      | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |   Tmax |   Tmax90p |      Tmin |   Tmin10p |     DG0 | uniq      |
|----:|-------------:|:----------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|-------:|----------:|----------:|----------:|--------:|:----------|
|   0 |            0 | multiples | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | nan            |    nan |   nan     | nan       | nan       |  nan    | multiples |
| 145 |          145 | multiples | PILGER           | 4056120 |         1911 |          10 |         2011 |           9 |       52.42 |      -105.15 |        552 | nan            |      7 |    25.419 |  -3.86342 | -23.695   | 1270.17 | multiples |
| 197 |          197 | multiples | MINE CENTRE      | 6025205 |         1915 |           2 |         2017 |          12 |       48.8  |       -92.6  |        361 | Y              |    nan |   nan     | nan       | nan       |  nan    | multiples |
| 196 |          196 | multiples | MADAWASKA        | 6080192 |         1915 |           8 |         2017 |          12 |       45.5  |       -77.98 |        316 | Y              |    nan |   nan     | nan       | nan       |  nan    | multiples |
| 195 |          195 | multiples | LONDON           | 6144478 |         1883 |           3 |         2017 |          12 |       43.03 |       -81.15 |        278 | Y              |     13 |    27.68  |   4.21358 |  -9.20833 | 2377.23 | multiples |
</code></pre>
<ul>
<li>Quelques méthodes sur les chaînes de caractères: <!-- raw HTML omitted -->.lower()<!-- raw HTML omitted -->, <!-- raw HTML omitted -->.upper()<!-- raw HTML omitted -->, <!-- raw HTML omitted -->.len()<!-- raw HTML omitted -->, <!-- raw HTML omitted -->.contains()<!-- raw HTML omitted -->:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>lower()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>0          agassiz
1            atlin
2      barkerville
3       beaverdell
4    blind channel
Name: Nom de station, dtype: object
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>upper()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>0          AGASSIZ
1            ATLIN
2      BARKERVILLE
3       BEAVERDELL
4    BLIND CHANNEL
Name: Nom de station, dtype: object
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>len()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>0     7
1     5
2    11
3    10
4    13
Name: Nom de station, dtype: int64
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe[dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>contains(<span style="color:#e6db74">&#39;CRANBROOK&#39;</span>)]
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov      | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |   Tmax |   Tmax90p |     Tmin |   Tmin10p |     DG0 | uniq      |
|---:|-------------:|:----------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|-------:|----------:|---------:|----------:|--------:|:----------|
| 10 |           10 | multiples | CRANBROOK        | 1152105 |         1901 |           1 |         2017 |          12 |       49.62 |      -115.78 |        940 | Y              |     11 |   27.3203 | 0.403836 |  -11.3553 | 1383.26 | multiples |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>strip()<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>0          AGASSIZ
1            ATLIN
2      BARKERVILLE
3       BEAVERDELL
4    BLIND CHANNEL
Name: Nom de station, dtype: object
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#39;Nom de station&#39;</span>]<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>0          [AGASSIZ]
1            [ATLIN]
2      [BARKERVILLE]
3       [BEAVERDELL]
4    [BLIND CHANNEL]
Name: Nom de station, dtype: object
</code></pre>
<h2 id="85---modifier-un-dataframe-et-introduction-au-feature-modeling">8.5-  Modifier un DataFrame et introduction au &ldquo;feature modeling&rdquo;:</h2>
<p>Il existe plusieurs fonctions, méthodes ou attributs qu&rsquo;on peut appliquer sur les DataFrame:</p>
<p><a href="https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.DataFrame.html">https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.DataFrame.html</a></p>
<p>Nous allons présenter quelques fonctions utiles lors de l&rsquo;exploration d&rsquo;un jeu de données.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe_Prov_index<span style="color:#f92672">.</span>head()

</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<h2 id="851---création-dune-variable-depuis-un-dataframe">8.5.1-  Création d&rsquo;une variable depuis un DataFrame:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">delta_year <span style="color:#f92672">=</span> (dataframe_Prov_index[<span style="color:#e6db74">&#34;année fin.&#34;</span>] <span style="color:#f92672">-</span> dataframe_Prov_index[<span style="color:#e6db74">&#34;année déb.&#34;</span>]) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">delta_year<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>Prov
BC    125
BC    113
BC    128
BC     68
BC    123
dtype: int64
</code></pre>
<h2 id="852--ajout-dune-variable-dans-un-dataframe">8.5.2- Ajout d&rsquo;une variable dans un DataFrame:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe_Prov_index[<span style="color:#e6db74">&#34;total année&#34;</span>] <span style="color:#f92672">=</span> delta_year
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe_Prov_index<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |   total année |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|--------------:|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |           125 |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |           113 |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |           128 |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |            68 |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |           123 |
</code></pre>
<h2 id="853--suppression-dune-variable-dans-un-dataframe">8.5.3- Suppression d&rsquo;une variable dans un DataFrame:</h2>
<ul>
<li>méthode <!-- raw HTML omitted -->drop()<!-- raw HTML omitted -->, en entrée on spécifie une liste</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
dataframe_Prov_index<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#34;stns jointes&#34;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</code></pre></div><pre><code>| Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   total année |
|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|--------------:|
| BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 |           125 |
| BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |           113 |
| BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 |           128 |
| BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 |            68 |
| BC     | BELLA COOLA      | 1060841 |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 |           123 |
</code></pre>
<ul>
<li>méthode <!-- raw HTML omitted -->pop()<!-- raw HTML omitted --></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#34;Deleting &#39;stnid&#39; column using POP function:&#34;</span>)
dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#34;./DATA/Homog_Temperature_Stations.xls&#34;</span>, skiprows <span style="color:#f92672">=</span> range(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>))
dataframe<span style="color:#f92672">.</span>pop(<span style="color:#e6db74">&#39;stnid&#39;</span>)
</code></pre></div><pre><code>Deleting 'stnid' column using POP function:
|    | Prov   | Nom de station   |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |
|---:|:-------|:-----------------|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|
|  0 | BC     | AGASSIZ          |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              |
|  1 | BC     | ATLIN            |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |
|  2 | BC     | BARKERVILLE      |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              |
|  3 | BC     | BEAVERDELL       |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |
|  4 | BC     | BELLA COOLA      |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 | Y              |
</code></pre>
<ul>
<li>fonction <!-- raw HTML omitted -->del()<!-- raw HTML omitted --></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span> (<span style="color:#e6db74">&#34;Deleting &#39;stns jointes&#39; column using DEL function:&#34;</span>)
<span style="color:#66d9ef">del</span> dataframe[<span style="color:#e6db74">&#39;stns jointes&#39;</span>]
dataframe<span style="color:#f92672">.</span>head()

</code></pre></div><pre><code>Deleting 'stns jointes' column using DEL function:
|    | Prov   | Nom de station   |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |
|---:|:-------|:-----------------|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|
|  0 | BC     | AGASSIZ          |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 |
|  1 | BC     | ATLIN            |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |
|  2 | BC     | BARKERVILLE      |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 |
|  3 | BC     | BEAVERDELL       |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 |
|  4 | BC     | BELLA COOLA      |         1895 |           5 |         2017 |          11 |       52.37 |      -126.68 |         18 |
</code></pre>
<h2 id="854--appliquer-des-fonctions">8.5.4- Appliquer des fonctions:</h2>
<p>Pour appliquer vos propres fonctions ou celles d&rsquo;une autre bibliothèque à des objets Pandas, vous devez connaître les trois méthodes importantes. La méthode appropriée à utiliser dépend du fait que votre fonction prévoit de fonctionner sur un DataFrame entier, par ligne ou par colonne ou par élément.</p>
<ul>
<li>
<p>Application d&rsquo;une fonction au niveau de la table: <!-- raw HTML omitted --> .pipe () <!-- raw HTML omitted --></p>
</li>
<li>
<p>Application d&rsquo;une fonction de ligne ou de colonne: <!-- raw HTML omitted --> .apply () <!-- raw HTML omitted --></p>
</li>
<li>
<p>Application d&rsquo;une fonction par élément: <!-- raw HTML omitted --> .applymap () <!-- raw HTML omitted --></p>
</li>
</ul>
<h2 id="8541--la-méthode-bapplyb">8.5.4.1- La méthode <!-- raw HTML omitted -->.apply()<!-- raw HTML omitted -->:</h2>
<ul>
<li>La méthode <!-- raw HTML omitted -->.apply()<!-- raw HTML omitted --> permet d&rsquo;appliquer une fonction sur l&rsquo;ensemble des valeurs d&rsquo;une colonnes.</li>
</ul>
<p>Des fonctions arbitraires peuvent être appliquées le long des axes d&rsquo;un DataFrame ou d&rsquo;un Panel à l&rsquo;aide de la méthode apply (), qui, comme les méthodes de statistiques descriptives, prend un argument d&rsquo;axe facultatif. Par défaut, l&rsquo;opération s&rsquo;effectue en colonnes, en prenant chaque colonne comme un tableau.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/Climato_Stations_ECCC_1981_2010_YEAR.csv&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;latin-1&#39;</span>)
dataframe[<span style="color:#e6db74">&#34;stns jointes&#34;</span>]<span style="color:#f92672">=</span>dataframe[<span style="color:#e6db74">&#34;stns jointes&#34;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: x<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;N&#34;</span>, <span style="color:#e6db74">&#34;NaN&#34;</span>))
dataframe[<span style="color:#e6db74">&#34;stns jointes&#34;</span>]<span style="color:#f92672">=</span>dataframe[<span style="color:#e6db74">&#34;stns jointes&#34;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: x<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;Y&#34;</span>, <span style="color:#e6db74">&#34;1&#34;</span>))
dataframe <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>dropna() 
<span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |     Tmax |   Tmax90p |     Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|---------:|----------:|---------:|----------:|---------:|
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |            nan |  5.63043 |   18.9033 | -3.46052 | -19.235   |  860.083 |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 |              1 | 12.628   |   23.6417 |  4.01748 |  -3.646   | 1798.09  |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 |            nan | 12.1556  |   20.2007 |  6.77689 |   1.09467 | 2518.68  |
|  5 |            5 | BC     | BLUE RIVER       | 1160899 |         1946 |           9 |         2017 |          12 |       52.13 |      -119.28 |        683 |              1 | 10.4408  |   25.9917 | -1.12501 | -12.5823  |  987.363 |
|  9 |            9 | BC     | COMOX            | 1021830 |         1935 |          11 |         2017 |          12 |       49.72 |      -124.9  |         26 |              1 | 13.7376  |   23.1023 |  6.42485 |  -0.526   | 2444.39  |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>dropna(axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
dataframe[<span style="color:#e6db74">&#34;Tmin&#34;</span>]<span style="color:#f92672">=</span>dataframe[<span style="color:#e6db74">&#34;Tmin&#34;</span>]<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> x: int(x))
<span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |     Tmax |   Tmax90p |   Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|---------:|----------:|-------:|----------:|---------:|
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 |            nan |  5.63043 |   18.9033 |     -3 | -19.235   |  860.083 |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 |              1 | 12.628   |   23.6417 |      4 |  -3.646   | 1798.09  |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 |            nan | 12.1556  |   20.2007 |      6 |   1.09467 | 2518.68  |
|  5 |            5 | BC     | BLUE RIVER       | 1160899 |         1946 |           9 |         2017 |          12 |       52.13 |      -119.28 |        683 |              1 | 10.4408  |   25.9917 |     -1 | -12.5823  |  987.363 |
|  9 |            9 | BC     | COMOX            | 1021830 |         1935 |          11 |         2017 |          12 |       49.72 |      -124.9  |         26 |              1 | 13.7376  |   23.1023 |      6 |  -0.526   | 2444.39  |
</code></pre>
<h2 id="855--filtrer-des-données">8.5.5- Filtrer des données:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#On veut toutes les valeurs mais uniquement pour une Province</span>
<span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>loc[dataframe[<span style="color:#e6db74">&#34;Prov&#34;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;NB&#34;</span>,:], headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |    Tmax |   Tmax90p |   Tmin |   Tmin10p |     DG0 |
|----:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|--------:|----------:|-------:|----------:|--------:|
| 256 |          256 | NB     | CHATHAM MIRA.    | 8100989 |         1873 |           1 |         2017 |          12 |       47.02 |       -65.47 |         33 |              1 | 10.6661 |   26.0853 |      0 |  -16.9597 | 1564.13 |
| 258 |          258 | NB     | FREDERICTON      | 8101505 |         1871 |          12 |         2017 |          12 |       45.87 |       -66.53 |         21 |              1 | 11.4353 |   26.306  |      0 |  -14.8207 | 1747.27 |
| 259 |          259 | NB     | MONCTON          | 8103201 |         1898 |           5 |         2017 |          12 |       46.1  |       -64.68 |         71 |              1 | 10.7642 |   25.392  |      0 |  -13.9483 | 1715.35 |
| 260 |          260 | NB     | SAINT JOHN       | 8104901 |         1871 |           1 |         2017 |          12 |       45.32 |       -65.88 |        109 |              1 | 10.4343 |   23.0513 |      0 |  -14.5553 | 1548.77 |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>loc[dataframe[<span style="color:#e6db74">&#34;DG0&#34;</span>]<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">2500</span>,:], headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |    Tmax |   Tmax90p |   Tmin |   Tmin10p |     DG0 |
|----:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|--------:|----------:|-------:|----------:|--------:|
|   4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 |            nan | 12.1556 |   20.2007 |      6 |  1.09467  | 2518.68 |
|  27 |           27 | BC     | MCINNES ISLAND   | 1065010 |         1955 |           1 |         2017 |          12 |       52.27 |      -128.72 |         26 |            nan | 11.3032 |   17.164  |      7 |  1.949    | 2587.88 |
|  44 |           44 | BC     | VANCOUVER        | 1108395 |         1896 |           2 |         2017 |          12 |       49.2  |      -123.18 |          4 |              1 | 13.9542 |   22.404  |      7 | -0.182667 | 2673.56 |
| 190 |          190 | ON     | HARROW           | 6130257 |         1917 |           4 |         2017 |          12 |       42.03 |       -82.9  |        182 |              1 | 14.7701 |   29.0533 |      5 | -8.03733  | 2655.17 |
| 210 |          210 | ON     | TORONTO          | 6158355 |         1840 |           3 |         2017 |          12 |       43.67 |       -79.4  |        113 |              1 | 13.1046 |   27.0743 |      5 | -7.532    | 2807.09 |
| 211 |          211 | ON     | VINELAND         | 6139148 |         1924 |          10 |         2017 |          12 |       43.18 |       -79.68 |         79 |              1 | 13.4847 |   27.5757 |      5 | -7.63633  | 2551.13 |
| 214 |          214 | ON     | WINDSOR          | 6139527 |         1940 |           8 |         2017 |          12 |       42.27 |       -82.97 |        190 |              1 | 14.4231 |   28.7953 |      5 | -7.38467  | 2803.45 |
</code></pre>
<p>On peut combiner des filtres:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>loc[(dataframe[<span style="color:#e6db74">&#34;Prov&#34;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#34;QC&#34;</span>) <span style="color:#f92672">&amp;</span> (dataframe[<span style="color:#e6db74">&#34;Tmin&#34;</span>]<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0</span>),:], headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) |   stns jointes |    Tmax |   Tmax90p |   Tmin |   Tmin10p |     DG0 |
|----:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|---------------:|--------:|----------:|-------:|----------:|--------:|
| 224 |          224 | QC     | DRUMMONDVILLE    | 7022160 |         1913 |          11 |         2017 |           8 |       45.88 |       -72.48 |         82 |            nan | 11.0868 |   26.6117 |      1 |  -15.8633 | 2110.86 |
</code></pre>
<h2 id="856--grouper-un-dataframe-sur-une-ou-plusieurs-colonnes-groupby">8.5.6- Grouper un DataFrame sur une ou plusieurs colonnes (groupby):</h2>
<p>Toute opération groupby implique l&rsquo;une des opérations suivantes sur l&rsquo;objet d&rsquo;origine. Ce sont -</p>
<pre><code>- Fractionner l'objet

- Application d'une fonction

- Combiner les résultats
</code></pre>
<p>Dans de nombreuses situations, nous divisons les données en ensembles et nous appliquons certaines fonctionnalités à chaque sous-ensemble. Nous pouvons effectuer les opérations suivantes -</p>
<pre><code>- Agrégation - calcul d'une statistique récapitulative

- Transformation - effectuer une opération spécifique au groupe

- Filtration - rejet des données avec certaines conditions
</code></pre>
<p>Créons maintenant un objet DataFrame et effectuons toutes les opérations dessus -</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/Climato_Stations_ECCC_1981_2010_YEAR.csv&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;latin-1&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |      Tmax |   Tmax90p |      Tmin |   Tmin10p |      DG0 |
|---:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|----------:|----------:|----------:|----------:|---------:|
|  0 |            0 | BC     | AGASSIZ          | 1100120 |         1893 |           1 |         2017 |          12 |       49.25 |      -121.77 |         15 | N              | nan       |  nan      | nan       | nan       |  nan     |
|  1 |            1 | BC     | ATLIN            | 1200560 |         1905 |           8 |         2017 |          12 |       59.57 |      -133.7  |        674 | N              |   5.63043 |   18.9033 |  -3.46052 | -19.235   |  860.083 |
|  2 |            2 | BC     | BARKERVILLE      | 1090660 |         1888 |           2 |         2015 |           3 |       53.07 |      -121.52 |       1265 | N              | nan       |  nan      | nan       | nan       |  nan     |
|  3 |            3 | BC     | BEAVERDELL       | 1130771 |         1939 |           1 |         2006 |           9 |       49.48 |      -119.05 |        838 | Y              |  12.628   |   23.6417 |   4.01748 |  -3.646   | 1798.09  |
|  4 |            4 | BC     | BLIND CHANNEL    | 1021480 |         1958 |           7 |         2016 |           2 |       50.42 |      -125.5  |         23 | N              |  12.1556  |   20.2007 |   6.77689 |   1.09467 | 2518.68  |
</code></pre>
<p>En observant le DataFrame ci-dessus, nous voyons qu&rsquo;il y a, au minimum, 3 variables que nous pouvons utiliser pour grouper notre jeu de données. On peut par exemple grouper nos données par province (Prov) , par année de début d&rsquo;enregistrement ou année de fin d&rsquo;enregistrement .</p>
<p>Nous allons utiliser le module groupeby de Pandas pour grouper nos données.</p>
<ul>
<li>Méthode <!-- raw HTML omitted -->.unique()<!-- raw HTML omitted --> : méthode permet d&rsquo;extraire les valeurs uniques d&rsquo;une colonne. On peut ainsi s&rsquo;assurer que notre variable à grouper possède plusieurs catégories.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe[<span style="color:#e6db74">&#34;Prov&#34;</span>]<span style="color:#f92672">.</span>unique() 
</code></pre></div><pre><code>array(['BC', 'YT', 'N   YT', 'NT', 'NU', 'AB', 'SK', 'MB', 'ON', 'QC',
       'NB', 'NS', 'PE', 'NL'], dtype=object)
</code></pre>
<h2 id="8561--fractionner-les-données-en-groupes">8.5.6.1- Fractionner les données en groupes:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df_Prov <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Prov&#39;</span>)
df_Prov<span style="color:#f92672">.</span>groups
</code></pre></div><pre><code>{'AB': Int64Index([ 96,  97,  98,  99, 100, 101, 102, 103, 104, 105, 106, 107, 108,
             109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121,
             122, 123, 124, 125, 126, 127, 128, 129, 130],
            dtype='int64'),
 'BC': Int64Index([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
             17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,
             34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
             50],
            dtype='int64'),
 'MB': Int64Index([156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168,
             169, 170, 171, 172, 173, 174, 175],
            dtype='int64'),
 'N   YT': Int64Index([52], dtype='int64'),
 'NB': Int64Index([254, 255, 256, 257, 258, 259, 260, 261], dtype='int64'),
 'NL': Int64Index([275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287,
             288],
            dtype='int64'),
 'NS': Int64Index([262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273], dtype='int64'),
 'NT': Int64Index([61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73], dtype='int64'),
 'NU': Int64Index([74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
             91, 92, 93, 94, 95],
            dtype='int64'),
 'ON': Int64Index([176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188,
             189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201,
             202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214,
             215],
            dtype='int64'),
 'PE': Int64Index([274], dtype='int64'),
 'QC': Int64Index([216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228,
             229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241,
             242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253],
            dtype='int64'),
 'SK': Int64Index([131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143,
             144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155],
            dtype='int64'),
 'YT': Int64Index([51, 53, 54, 55, 56, 57, 58, 59, 60], dtype='int64')}
</code></pre>
<ul>
<li>Sélectionner un groupe: méthode <!-- raw HTML omitted -->.get_group()<!-- raw HTML omitted --></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(df_Prov<span style="color:#f92672">.</span>get_group(<span style="color:#e6db74">&#39;QC&#39;</span>)<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov   | Nom de station   | stnid   |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |      Tmax |   Tmax90p |       Tmin |   Tmin10p |     DG0 |
|----:|-------------:|:-------|:-----------------|:--------|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|----------:|----------:|-----------:|----------:|--------:|
| 216 |          216 | QC     | AMOS             | 709CEE9 |         1913 |           6 |         2017 |           8 |       48.57 |       -78.13 |        305 | Y              | nan       |  nan      | nan        |  nan      |  nan    |
| 217 |          217 | QC     | BAGOTVILLE       | 7060400 |         1880 |          11 |         2017 |          12 |       48.33 |       -71    |        159 | Y              |   8.28139 |   25.2973 |  -1.83359  |  -20.8117 | 1528.41 |
| 218 |          218 | QC     | BEAUCEVILLE      | 7027283 |         1913 |           8 |         2017 |           8 |       46.15 |       -70.7  |        168 | Y              |  10.5515  |   26.0783 |  -1.37634  |  -19.6283 | 1509.36 |
| 219 |          219 | QC     | BROME            | 7020840 |         1890 |           9 |         2014 |           7 |       45.18 |       -72.57 |        206 | N              |  11.1409  |   26.1767 |  -0.294151 |  -17.56   | 1676.23 |
| 220 |          220 | QC     | CAUSAPSCAL       | 7051200 |         1913 |          11 |         2017 |           8 |       48.37 |       -67.23 |        168 | N              | nan       |  nan      | nan        |  nan      |  nan    |
</code></pre>
<p>On peut faire un .groupeby() sur plusieurs catégories.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#34;Prov&#34;</span>, <span style="color:#e6db74">&#34;année fin.&#34;</span>])[<span style="color:#e6db74">&#34;Tmin&#34;</span>]<span style="color:#f92672">.</span>describe()<span style="color:#f92672">.</span>head(), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|              |   count |      mean |       std |       min |       25% |       50% |       75% |       max |
|:-------------|--------:|----------:|----------:|----------:|----------:|----------:|----------:|----------:|
| ('AB', 2011) |       0 | nan       | nan       | nan       | nan       | nan       | nan       | nan       |
| ('AB', 2013) |       1 |  -4.21653 | nan       |  -4.21653 |  -4.21653 |  -4.21653 |  -4.21653 |  -4.21653 |
| ('AB', 2016) |       1 |  -2.49021 | nan       |  -2.49021 |  -2.49021 |  -2.49021 |  -2.49021 |  -2.49021 |
| ('AB', 2017) |      17 |  -3.01535 |   1.45026 |  -6.54421 |  -3.42227 |  -3.11709 |  -2.92727 |  -0.1559  |
| ('BC', 2006) |       1 |   4.01748 | nan       |   4.01748 |   4.01748 |   4.01748 |   4.01748 |   4.01748 |
</code></pre>
<h2 id="8562--itérer-au-travers-des--groupes">8.5.6.2- Itérer au travers des  groupes:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">grouped <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Prov&#39;</span>)

<span style="color:#66d9ef">for</span> name,group <span style="color:#f92672">in</span> grouped:
   <span style="color:#66d9ef">print</span>(name)
   <span style="color:#66d9ef">print</span>(group)
</code></pre></div><pre><code>AB
     Unnamed: 0 Prov   Nom de station    stnid  année déb.  mois déb.  \
96           96   AB        ATHABASCA  3060L20        1918          6   
97           97   AB            BANFF  3050519        1887         11   
98           98   AB      BEAVERLODGE  3070600        1913          4   
99           99   AB          CALGARY  3031092        1885          1   
100         100   AB           CALMAR  3011120        1915         11   
101         101   AB          CAMPSIE  3061200        1912          9   
102         102   AB          CAMROSE  3011240        1946          3   
103         103   AB           CARWAY  3031402        1914          8   
104         104   AB        COLD LAKE  3081680        1925          7   
105         105   AB       CORONATION  3011887        1924          4   
106         106   AB         EDMONTON  3012216        1880          7   
107         107   AB            EDSON  3062246        1914          2   
108         108   AB         ENTRANCE  306A009        1917          6   
109         109   AB         FAIRVIEW  3072525        1931         10   
110         110   AB   FORT CHIPEWYAN  3072655        1883         10   
111         111   AB    FORT MCMURRAY  3062696        1916          1   
112         112   AB   FORT VERMILION  3072723        1908          7   
113         113   AB         GLEICHEN  3032801        1903          7   
114         114   AB   GRANDE PRAIRIE  3072921        1922          8   
115         115   AB     HIGH PRAIRIE  3063165        1926          9   
116         116   AB       HIGH RIVER  3033250        1902          8   
117         117   AB           JASPER  3053536        1926          9   
118         118   AB          LACOMBE  3023722        1907         12   
119         119   AB       LETHBRIDGE  3033890        1902          1   
120         120   AB      MANYBERRIES  3044923        1928          8   
121         121   AB     MEDICINE HAT  3034485        1883          8   
122         122   AB             OLDS  3024925        1914          4   
123         123   AB      PEACE RIVER  3075041        1907         10   
124         124   AB    PINCHER CREEK  3035198        1893          8   
125         125   AB         RANFURLY  3015401        1905          1   
126         126   AB  ROCKY MTN HOUSE  3015523        1915          8   
127         127   AB       SLAVE LAKE  3065995        1922          8   
128         128   AB   STETTLER NORTH  3016124        1918          9   
129         129   AB         VAUXHALL  3036682        1913         10   
130         130   AB       WHITECOURT  3067373        1942         12   

     année fin.  mois fin.  lat (deg)  long (deg)  élév (m) stns jointes  \
96         2017         12      54.82     -113.53       626            Y   
97         2017         12      51.20     -115.55      1397            Y   
98         2017         12      55.20     -119.40       745            Y   
99         2017         12      51.12     -114.02      1084            Y   
100        2016         12      53.28     -113.85       720            N   
101        2013         10      54.13     -114.68       671            N   
102        2017         12      53.03     -112.82       739            N   
103        2017         12      49.00     -113.37      1354            Y   
104        2017         12      54.42     -110.28       541            Y   
105        2017         12      52.08     -111.45       791            Y   
106        2017         12      53.57     -113.52       723            Y   
107        2017         12      53.58     -116.47       927            Y   
108        2017         12      53.37     -117.70       991            Y   
109        2017         12      56.07     -118.38       655            Y   
110        2017         12      58.77     -111.12       238            Y   
111        2017         12      56.65     -111.22       369            Y   
112        2017         12      58.38     -116.03       289            Y   
113        2017         12      50.88     -113.05       905            Y   
114        2017         12      55.18     -118.88       669            Y   
115        2017          9      55.40     -116.48       602            Y   
116        2011          9      50.48     -114.17      1580            Y   
117        2017         12      52.93     -118.03      1020            Y   
118        2017         12      52.45     -113.75       860            Y   
119        2017         12      49.63     -112.80       929            Y   
120        2017         12      49.12     -110.47       935            Y   
121        2017         12      50.02     -110.72       717            Y   
122        2017         12      51.78     -114.10      1046            Y   
123        2017         12      56.23     -117.43       571            Y   
124        2017         12      49.52     -113.98      1190            Y   
125        2017         12      53.42     -111.73       673            Y   
126        2017         12      52.43     -114.92       988            Y   
127        2017         12      55.30     -114.78       583            Y   
128        2017         12      52.33     -112.72       821            Y   
129        2017         12      50.05     -112.13       779            Y   
130        2016          6      54.15     -115.78       782            Y   

          Tmax    Tmax90p      Tmin    Tmin10p          DG0  
96    8.240395  24.018667 -3.362346 -21.040000  1168.233333  
97    8.906518  23.132000 -3.084884 -15.858333   750.370000  
98    8.158459  23.086667 -2.927270 -18.997667  1051.916667  
99   10.834976  24.467333 -1.444606 -15.235000  1172.050000  
100        NaN        NaN       NaN        NaN          NaN  
101   9.214514  24.548333 -4.216529 -21.218333   979.166667  
102   8.964966  24.175667 -3.714421 -20.588000  1048.130000  
103  11.139694  24.925000 -1.618858 -13.980000   956.836667  
104   7.724485  24.273667 -3.037595 -21.203667  1303.950000  
105        NaN        NaN       NaN        NaN          NaN  
106   8.982117  24.328000 -3.117089 -19.190667  1095.933333  
107        NaN        NaN       NaN        NaN          NaN  
108        NaN        NaN       NaN        NaN          NaN  
109        NaN        NaN       NaN        NaN          NaN  
110   4.282190  23.566000 -6.544206 -28.629667  1135.113333  
111   7.080704  24.609667 -4.511516 -23.883667  1145.983333  
112        NaN        NaN       NaN        NaN          NaN  
113        NaN        NaN       NaN        NaN          NaN  
114   8.185239  23.771333 -3.374008 -20.712667  1126.333333  
115        NaN        NaN       NaN        NaN          NaN  
116        NaN        NaN       NaN        NaN          NaN  
117   9.831020  24.132000 -3.341606 -16.509667   761.946667  
118        NaN        NaN       NaN        NaN          NaN  
119        NaN        NaN       NaN        NaN          NaN  
120        NaN        NaN       NaN        NaN          NaN  
121  12.648926  28.497333 -0.155900 -15.783333  1563.866667  
122        NaN        NaN       NaN        NaN          NaN  
123   7.358369  23.566333 -3.784061 -21.467667  1121.106667  
124  10.973669  25.435000 -0.837767 -14.170000  1166.016667  
125   8.434513  24.951667 -2.982488 -19.998333  1204.603333  
126        NaN        NaN       NaN        NaN          NaN  
127   7.481366  22.464333 -3.422267 -20.380333  1131.030000  
128        NaN        NaN       NaN        NaN          NaN  
129        NaN        NaN       NaN        NaN          NaN  
130   8.458045  23.313333 -2.490207 -17.834000  1104.916667  
BC
</code></pre>
<h2 id="8563--fonctions-dites-dagrégation">8.5.6.3- Fonctions dites d&rsquo;agrégation:</h2>
<p>Une fonction agrégée renvoie une seule valeur agrégée pour chaque groupe. Une fois le groupe par objet créé, plusieurs opérations d&rsquo;agrégation peuvent être effectuées sur les données groupées.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;./DATA/Climato_Stations_ECCC_1981_2010_YEAR.csv&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;latin-1&#39;</span>)
grouped <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Prov&#39;</span>)
grouped[<span style="color:#e6db74">&#39;Tmin&#39;</span>]<span style="color:#f92672">.</span>agg(np<span style="color:#f92672">.</span>mean)
</code></pre></div><pre><code>Prov
AB        -3.050928
BC         1.578024
MB        -4.493900
N   YT          NaN
NB         0.341750
NL        -1.324334
NS         2.542629
NT        -8.518655
NU       -16.522658
ON         0.031970
PE         1.986827
QC        -1.992695
SK        -3.208984
YT        -8.995421
Name: Tmin, dtype: float64
</code></pre>
<h2 id="8564---appliquer-plusieurs-fonctions">8.5.6.4-  Appliquer plusieurs fonctions:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(grouped[<span style="color:#e6db74">&#39;Tmin&#39;</span>]<span style="color:#f92672">.</span>agg([np<span style="color:#f92672">.</span>min, np<span style="color:#f92672">.</span>mean, np<span style="color:#f92672">.</span>max, np<span style="color:#f92672">.</span>std]), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>| Prov   |       amin |        mean |       amax |        std |
|:-------|-----------:|------------:|-----------:|-----------:|
| AB     |  -6.54421  |  -3.05093   |  -0.1559   |   1.40133  |
| BC     |  -6.06858  |   1.57802   |   7.01629  |   3.89638  |
| MB     | -10.0943   |  -4.4939    |  -1.98027  |   2.61835  |
| N   YT | nan        | nan         | nan        | nan        |
| NB     |  -0.491043 |   0.34175   |   0.840796 |   0.598429 |
| NL     |  -8.02478  |  -1.32433   |   1.81275  |   3.42585  |
| NS     |   1.21413  |   2.54263   |   3.75946  |   0.982653 |
| NT     | -12.4518   |  -8.51865   |  -6.68323  |   2.16937  |
| NU     | -21.9351   | -16.5227    | -12.2332   |   3.0491   |
| ON     |  -7.48484  |   0.0319696 |   5.91872  |   3.64788  |
| PE     |   1.98683  |   1.98683   |   1.98683  | nan        |
| QC     |  -8.76805  |  -1.99269   |   1.62212  |   2.70668  |
| SK     |  -5.01656  |  -3.20898   |  -1.42885  |   1.03055  |
| YT     | -10.2177   |  -8.99542   |  -7.77313  |   1.72858  |
</code></pre>
<h2 id="8565--transformations">8.5.6.5- Transformations:</h2>
<p>La transformation sur un groupe ou une colonne renvoie un objet indexé de la même taille que celui en cours de regroupement.</p>
<p>Par conséquent, la transformation doit renvoyer un résultat de la même taille que celui d&rsquo;un bloc de groupe.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">grouped <span style="color:#f92672">=</span> dataframe<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Prov&#39;</span>)
and_stand <span style="color:#f92672">=</span> <span style="color:#66d9ef">lambda</span> x: (x <span style="color:#f92672">-</span> x<span style="color:#f92672">.</span>mean()) <span style="color:#f92672">/</span> x<span style="color:#f92672">.</span>std()
grouped[<span style="color:#e6db74">&#39;Tmin&#39;</span>]<span style="color:#f92672">.</span>transform(and_stand)<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>0         NaN
1   -1.293133
2         NaN
3    0.626082
4    1.334280
Name: Tmin, dtype: float64
</code></pre>
<h2 id="8566--filtration">8.5.6.6- Filtration:</h2>
<p>La filtration filtre les données selon des critères définis et renvoie le sous-ensemble de données. La fonction filter () est utilisée pour filtrer les données.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(dataframe<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;Prov&#39;</span>)<span style="color:#f92672">.</span>filter(<span style="color:#66d9ef">lambda</span> x: len(x) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>), headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|     |   Unnamed: 0 | Prov   | Nom de station   |   stnid |   année déb. |   mois déb. |   année fin. |   mois fin. |   lat (deg) |   long (deg) |   élév (m) | stns jointes   |     Tmax |   Tmax90p |      Tmin |   Tmin10p |     DG0 |
|----:|-------------:|:-------|:-----------------|--------:|-------------:|------------:|-------------:|------------:|------------:|-------------:|-----------:|:---------------|---------:|----------:|----------:|----------:|--------:|
|  52 |           52 | N   YT | HAINES JUNCTIO   | 2100630 |         1944 |          10 |         2017 |          12 |       60.75 |      -137.5  |        596 | N              | nan      |  nan      | nan       |  nan      |  nan    |
| 274 |          274 | PE     | CHARLOTTETOWN    | 8300301 |         1872 |          11 |         2017 |          12 |       46.28 |       -63.13 |         49 | Y              |  10.0063 |   23.7683 |   1.98683 |  -12.0367 | 1912.16 |
</code></pre>
<h2 id="86---rassembler-plusieurs-dataframes">8.6-  Rassembler plusieurs Dataframes:</h2>
<h2 id="861--jointure-de-dataframes">8.6.1- Jointure de DataFrames:</h2>
<p>Il s’agit de &ldquo;jointer&rdquo; deux tables partageant la même clef ou encore de concaténer horizontalement les lignes en faisant correspondre les valeurs d’une variable clef qui peuvent ne pas être uniques.</p>
<p><img src="/img/formation/join.png" alt="image0"></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">left_dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
   <span style="color:#e6db74">&#39;id&#39;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>],
   <span style="color:#e6db74">&#39;Nom de station&#39;</span>: [<span style="color:#e6db74">&#39;MONTREAL TAVISH&#39;</span>, <span style="color:#e6db74">&#39;QUEBEC&#39;</span>, <span style="color:#e6db74">&#39;TADOUSSAC&#39;</span>,<span style="color:#e6db74">&#39;OKA&#39;</span>],
   <span style="color:#e6db74">&#39;variable&#39;</span>:[<span style="color:#e6db74">&#39;var1&#39;</span>,<span style="color:#e6db74">&#39;var2&#39;</span>,<span style="color:#e6db74">&#39;var6&#39;</span>,<span style="color:#e6db74">&#39;var5&#39;</span>]})

right_dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
   {<span style="color:#e6db74">&#39;id&#39;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>],
   <span style="color:#e6db74">&#39;Nom de station&#39;</span>: [<span style="color:#e6db74">&#39;TORONTO&#39;</span>, <span style="color:#e6db74">&#39;OTTAWA&#39;</span>, <span style="color:#e6db74">&#39;KINGSTON&#39;</span>,<span style="color:#e6db74">&#39;CHAPLEAU&#39;</span>],
   <span style="color:#e6db74">&#39;variable&#39;</span>:[<span style="color:#e6db74">&#39;var3&#39;</span>,<span style="color:#e6db74">&#39;var1&#39;</span>,<span style="color:#e6db74">&#39;var6&#39;</span>,<span style="color:#e6db74">&#39;var5&#39;</span>]})
left_dataframe
<span style="color:#66d9ef">print</span>(tabulate(left_dataframe, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station   | variable   |
|---:|-----:|:-----------------|:-----------|
|  0 |    1 | MONTREAL TAVISH  | var1       |
|  1 |    2 | QUEBEC           | var2       |
|  2 |    3 | TADOUSSAC        | var6       |
|  3 |    4 | OKA              | var5       |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span>(tabulate(right_dataframe, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station   | variable   |
|---:|-----:|:-----------------|:-----------|
|  0 |    1 | TORONTO          | var3       |
|  1 |    2 | OTTAWA           | var1       |
|  2 |    3 | KINGSTON         | var6       |
|  3 |    4 | CHAPLEAU         | var5       |
</code></pre>
<h2 id="8611---assembler-deux-dataframes-sur-une-clé">8.6.1.1-  Assembler deux DataFrames sur une clé:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe,right_dataframe,on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;id&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station_x   | variable_x   | Nom de station_y   | variable_y   |
|---:|-----:|:-------------------|:-------------|:-------------------|:-------------|
|  0 |    1 | MONTREAL TAVISH    | var1         | TORONTO            | var3         |
|  1 |    2 | QUEBEC             | var2         | OTTAWA             | var1         |
|  2 |    3 | TADOUSSAC          | var6         | KINGSTON           | var6         |
|  3 |    4 | OKA                | var5         | CHAPLEAU           | var5         |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe,right_dataframe,on<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;id&#39;</span>,<span style="color:#e6db74">&#39;variable&#39;</span>])
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station_x   | variable   | Nom de station_y   |
|---:|-----:|:-------------------|:-----------|:-------------------|
|  0 |    3 | TADOUSSAC          | var6       | KINGSTON           |
|  1 |    4 | OKA                | var5       | CHAPLEAU           |
</code></pre>
<h2 id="8612---fusionner-deux-dataframes-en-utilisant-largument-how">8.6.1.2-  Fusionner deux DataFrames en utilisant l&rsquo;argument &lsquo;How&rsquo;:</h2>
<p>L&rsquo;argument &ldquo;how&rdquo; permet de  déterminer les clés à inclure dans la table résultante.</p>
<p>Si aucune combinaison de clés n&rsquo;apparaît dans les tableaux de gauche ou de droite, les valeurs du tableau joint seront NaN.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Left Join</span>
data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe, right_dataframe, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;left&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id_x | Nom de station_x   | variable   |   id_y | Nom de station_y   |
|---:|-------:|:-------------------|:-----------|-------:|:-------------------|
|  0 |      1 | MONTREAL TAVISH    | var1       |      2 | OTTAWA             |
|  1 |      2 | QUEBEC             | var2       |    nan | nan                |
|  2 |      3 | TADOUSSAC          | var6       |      3 | KINGSTON           |
|  3 |      4 | OKA                | var5       |      4 | CHAPLEAU           |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># right Join</span>
data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe, right_dataframe, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;right&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id_x | Nom de station_x   | variable   |   id_y | Nom de station_y   |
|---:|-------:|:-------------------|:-----------|-------:|:-------------------|
|  0 |      1 | MONTREAL TAVISH    | var1       |      2 | OTTAWA             |
|  1 |      3 | TADOUSSAC          | var6       |      3 | KINGSTON           |
|  2 |      4 | OKA                | var5       |      4 | CHAPLEAU           |
|  3 |    nan | nan                | var3       |      1 | TORONTO            |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># inner Join</span>
data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe, right_dataframe, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id_x | Nom de station_x   | variable   |   id_y | Nom de station_y   |
|---:|-------:|:-------------------|:-----------|-------:|:-------------------|
|  0 |      1 | MONTREAL TAVISH    | var1       |      2 | OTTAWA             |
|  1 |      3 | TADOUSSAC          | var6       |      3 | KINGSTON           |
|  2 |      4 | OKA                | var5       |      4 | CHAPLEAU           |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># outer Join</span>
data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>merge(left_dataframe, right_dataframe, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;variable&#39;</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;outer&#39;</span>)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id_x | Nom de station_x   | variable   |   id_y | Nom de station_y   |
|---:|-------:|:-------------------|:-----------|-------:|:-------------------|
|  0 |      1 | MONTREAL TAVISH    | var1       |      2 | OTTAWA             |
|  1 |      2 | QUEBEC             | var2       |    nan | nan                |
|  2 |      3 | TADOUSSAC          | var6       |      3 | KINGSTON           |
|  3 |      4 | OKA                | var5       |      4 | CHAPLEAU           |
|  4 |    nan | nan                | var3       |      1 | TORONTO            |
</code></pre>
<h2 id="862--concatenation-de-dataframes">8.6.2- Concatenation de DataFrames:</h2>
<p>Pandas offre diverses fonctionnalités pour combiner facilement des objets DataFrame.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe1 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({
   <span style="color:#e6db74">&#39;id&#39;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>],
   <span style="color:#e6db74">&#39;Nom de station&#39;</span>: [<span style="color:#e6db74">&#39;MONTREAL TAVISH&#39;</span>, <span style="color:#e6db74">&#39;QUEBEC&#39;</span>, <span style="color:#e6db74">&#39;TADOUSSAC&#39;</span>,<span style="color:#e6db74">&#39;OKA&#39;</span>],
   <span style="color:#e6db74">&#39;variable&#39;</span>:[<span style="color:#e6db74">&#39;var1&#39;</span>,<span style="color:#e6db74">&#39;var2&#39;</span>,<span style="color:#e6db74">&#39;var6&#39;</span>,<span style="color:#e6db74">&#39;var5&#39;</span>]})

dataframe2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(
   {<span style="color:#e6db74">&#39;id&#39;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>],
   <span style="color:#e6db74">&#39;Nom de station&#39;</span>: [<span style="color:#e6db74">&#39;TORONTO&#39;</span>, <span style="color:#e6db74">&#39;OTTAWA&#39;</span>, <span style="color:#e6db74">&#39;KINGSTON&#39;</span>,<span style="color:#e6db74">&#39;CHAPLEAU&#39;</span>],
   <span style="color:#e6db74">&#39;variable&#39;</span>:[<span style="color:#e6db74">&#39;var3&#39;</span>,<span style="color:#e6db74">&#39;var1&#39;</span>,<span style="color:#e6db74">&#39;var6&#39;</span>,<span style="color:#e6db74">&#39;var5&#39;</span>]})

data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>concat([dataframe1,dataframe2])
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station   | variable   |
|---:|-----:|:-----------------|:-----------|
|  0 |    1 | MONTREAL TAVISH  | var1       |
|  1 |    2 | QUEBEC           | var2       |
|  2 |    3 | TADOUSSAC        | var6       |
|  3 |    4 | OKA              | var5       |
|  0 |    1 | TORONTO          | var3       |
|  1 |    2 | OTTAWA           | var1       |
|  2 |    3 | KINGSTON         | var6       |
|  3 |    4 | CHAPLEAU         | var5       |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>concat([dataframe1,dataframe2],keys<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;QC&#39;</span>,<span style="color:#e6db74">&#39;ON&#39;</span>])
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|           |   id | Nom de station   | variable   |
|:----------|-----:|:-----------------|:-----------|
| ('QC', 0) |    1 | MONTREAL TAVISH  | var1       |
| ('QC', 1) |    2 | QUEBEC           | var2       |
| ('QC', 2) |    3 | TADOUSSAC        | var6       |
| ('QC', 3) |    4 | OKA              | var5       |
| ('ON', 0) |    1 | TORONTO          | var3       |
| ('ON', 1) |    2 | OTTAWA           | var1       |
| ('ON', 2) |    3 | KINGSTON         | var6       |
| ('ON', 3) |    4 | CHAPLEAU         | var5       |
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>concat([dataframe1,dataframe2],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
data
</code></pre></div><!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<h2 id="concaténation-avec-append">Concaténation avec append</h2>
<p>Un raccourci utile pour concatérer sont les méthodes d&rsquo;instance d&rsquo;ajout sur DataFrame. Ils concaténent le long de l&rsquo;axe = 0, à savoir l&rsquo;indice</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">data<span style="color:#f92672">=</span>dataframe1<span style="color:#f92672">.</span>append(dataframe2)
<span style="color:#66d9ef">print</span>(tabulate(data, headers<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;keys&#39;</span>, tablefmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pipe&#39;</span>))
</code></pre></div><pre><code>|    |   id | Nom de station   | variable   |
|---:|-----:|:-----------------|:-----------|
|  0 |    1 | MONTREAL TAVISH  | var1       |
|  1 |    2 | QUEBEC           | var2       |
|  2 |    3 | TADOUSSAC        | var6       |
|  3 |    4 | OKA              | var5       |
|  0 |    1 | TORONTO          | var3       |
|  1 |    2 | OTTAWA           | var1       |
|  2 |    3 | KINGSTON         | var6       |
|  3 |    4 | CHAPLEAU         | var5       |
</code></pre>
<h2 id="9---sauver-un-dataframe">9-  Sauver un DataFrame:</h2>
<p>Pour l’écriture d&rsquo;un DataFrame on utilise les fonctions <!-- raw HTML omitted -->.to_csv<!-- raw HTML omitted --> ou <!-- raw HTML omitted -->_table<!-- raw HTML omitted --> avec des options similaires que read_csv() vues précédemment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dataframe<span style="color:#f92672">.</span>to_csv(<span style="color:#e6db74">&#34;./DATA/mon_nouveau_dataframe.csv&#34;</span>, index <span style="color:#f92672">=</span> False, header <span style="color:#f92672">=</span> True, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;,&#39;</span>)
</code></pre></div><h2 id="10--les-dates">10- Les dates:</h2>
<p>Une fois un Dataframe crée, il peut être très pertinent d&rsquo;ajouter au besoin un index temporel afin de faciliter nos analyses.</p>
<p>En utilisant la fonction <!-- raw HTML omitted --> date.range () <!-- raw HTML omitted -->, nous pouvons créer la série de dates.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;1/1/2011&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>)
</code></pre></div><pre><code>DatetimeIndex(['2011-01-01', '2011-01-02', '2011-01-03', '2011-01-04',
               '2011-01-05'],
              dtype='datetime64[ns]', freq='D')
</code></pre>
<p>Pour modifier la fréquence:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>date_range(<span style="color:#e6db74">&#39;1/1/2011&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>,freq<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;M&#39;</span>)
</code></pre></div><pre><code>DatetimeIndex(['2011-01-31', '2011-02-28', '2011-03-31', '2011-04-30',
               '2011-05-31'],
              dtype='datetime64[ns]', freq='M')
</code></pre>
<ul>
<li><!-- raw HTML omitted -->bdate_range()<!-- raw HTML omitted --> permet de travailler avec des ours ouvrés.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>bdate_range(<span style="color:#e6db74">&#39;1/1/2011&#39;</span>, periods<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</code></pre></div><pre><code>DatetimeIndex(['2011-01-03', '2011-01-04', '2011-01-05', '2011-01-06',
               '2011-01-07', '2011-01-10', '2011-01-11', '2011-01-12',
               '2011-01-13', '2011-01-14'],
              dtype='datetime64[ns]', freq='B')
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">start <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>datetime(<span style="color:#ae81ff">2011</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>)
end <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>datetime(<span style="color:#ae81ff">2011</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>)
pd<span style="color:#f92672">.</span>date_range(start, end)
</code></pre></div><pre><code>DatetimeIndex(['2011-01-01', '2011-01-02', '2011-01-03', '2011-01-04',
               '2011-01-05'],
              dtype='datetime64[ns]', freq='D')
</code></pre>
<!-- raw HTML omitted -->
<p>Python fournit ne nombreuses fonctionnalités pour travailler avec des dates et le temps de manière plus générale.</p>
<p>Datetime est un module qui permet de manipuler des dates et des durées sous forme d’objets. L’idée est simple: vous manipulez l’objet pour faire tous vos calculs, et quand vous avez besoin de l’afficher, vous formatez l’objet en chaîne de caractères.</p>
<p><a href="https://docs.python.org/2/library/datetime.html">https://docs.python.org/2/library/datetime.html</a></p>
<p>On peut créer artificiellement un objet datetime suivant les paramètres suivant:</p>
<pre><code>    datetime(année, mois, jour, heure, minute, seconde, microseconde, fuseau horaire)
</code></pre>
<p>Les paramètres “année”, “mois” et “jour” sont obligatoires.</p>
<p>Le module datetime fournit les classes suivantes:</p>
<!-- raw HTML omitted -->
<p>Nous allons voir dans ce qui suit quelques exemples d&rsquo;utilisation de DateTime et de ses classes.  Par la suite, nous verrons qu&rsquo;une combinaise du module de datetime nous offre une grande aisance dans le traitement des données.</p>
<h2 id="111--la-classe-bdatetimeb-du-module-datetime">11.1- La classe <!-- raw HTML omitted -->datetime<!-- raw HTML omitted --> du module datetime:</h2>
<h2 id="1111--création-dun-objet-datetime">11.1.1- Création d&rsquo;un objet datetime:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime
datetime(<span style="color:#ae81ff">2019</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>)       <span style="color:#75715e"># ceci est une instance de datetime</span>
</code></pre></div><pre><code>datetime.datetime(2019, 3, 1, 0, 0)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>now()
maintenant
</code></pre></div><pre><code>datetime.datetime(2020, 9, 8, 11, 24, 42, 424718)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>utcnow()
maintenant
</code></pre></div><pre><code>datetime.datetime(2020, 9, 8, 15, 24, 42, 649731)
</code></pre>
<p>Lors de l&rsquo;ouverture d&rsquo;un fichier csv ou text, nous avons une information sur la date et le temps des mesures mais sous forme de chaînes de caractères: &ldquo;2018-11-01 15:20&rdquo; ou &ldquo;2017/12/1 16:35:22&rdquo; &hellip;</p>
<p>Il est possible lors de la lecture de convertir ces chaînes de caractères en objet datetime.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dt <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>strptime(<span style="color:#e6db74">&#34;2018/11/01 15:20&#34;</span>, <span style="color:#e6db74">&#34;%Y/%m/</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> %H:%M&#34;</span>)
dt
</code></pre></div><pre><code>datetime.datetime(2018, 11, 1, 15, 20)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dt <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>strptime(<span style="color:#e6db74">&#34;2017/12/1 16:35:22&#34;</span>, <span style="color:#e6db74">&#34;%Y/%m/</span><span style="color:#e6db74">%d</span><span style="color:#e6db74"> %H:%M:%S&#34;</span>)
dt
</code></pre></div><pre><code>datetime.datetime(2017, 12, 1, 16, 35, 22)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dt <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>strptime(<span style="color:#e6db74">&#34;01/11/19 10-35:22&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">/%m/%y %H-%M:%S&#34;</span>)
dt

</code></pre></div><pre><code>datetime.datetime(2019, 11, 1, 10, 35, 22)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">dt <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>strptime(<span style="color:#e6db74">&#34;1Mar 2019 à 09h35&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">%b %Y à %Hh%M&#34;</span>)
dt
</code></pre></div><pre><code>datetime.datetime(2019, 3, 1, 9, 35)
</code></pre>
<h2 id="1112--manipuler-un-objet-datetime">11.1.2- Manipuler un objet datetime:</h2>
<p>Depuis un objet ou instance de datetime, on peut récupérer l&rsquo;heure et la date.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant<span style="color:#f92672">.</span>year
<span style="color:#75715e">#maintenant.month</span>
<span style="color:#75715e">#maintenant.day</span>
<span style="color:#75715e">#maintenant.hour</span>
maintenant<span style="color:#f92672">.</span>minute
<span style="color:#75715e">#maintenant.second</span>
<span style="color:#75715e">#maintenant.microsecond</span>
</code></pre></div><pre><code>24
</code></pre>
<p>On peut modifier une instance datetime.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant<span style="color:#f92672">.</span>replace(year<span style="color:#f92672">=</span><span style="color:#ae81ff">1995</span>) <span style="color:#75715e"># on créer un nouvel objet</span>
</code></pre></div><pre><code>datetime.datetime(1995, 9, 8, 15, 24, 42, 649731)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant<span style="color:#f92672">.</span>replace(month<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</code></pre></div><pre><code>datetime.datetime(2020, 1, 8, 15, 24, 42, 649731)
</code></pre>
<p>On peut ensuite écrire en format string un objet datetime</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">d <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>now(); <span style="color:#66d9ef">print</span>(d)
</code></pre></div><pre><code>2020-09-08 11:24:46.451948
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Heures et minutes</span>
d<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;%H:%M&#34;</span>), d<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;%Hh%Mmin&#34;</span>)
</code></pre></div><pre><code>('11:24', '11h24min')
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Année ,mois , heure</span>
d<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#34;%Y-%m %H:%M&#34;</span>)
</code></pre></div><pre><code>'2020-09 11:24'
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#39;Nous sommes le {0:</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">} {0:%B} et il est {0:%Hh%Mmin} &#39;</span><span style="color:#f92672">.</span>format(d, <span style="color:#e6db74">&#34;day&#34;</span>, <span style="color:#e6db74">&#34;month&#34;</span>, <span style="color:#e6db74">&#34;time&#34;</span>)
</code></pre></div><pre><code>'Nous sommes le 08 September et il est 11h24min '
</code></pre>
<ul>
<li>Les classes <!-- raw HTML omitted -->date<!-- raw HTML omitted --> et <!-- raw HTML omitted -->time<!-- raw HTML omitted --></li>
</ul>
<p>Ces deux classes peuvent être utilisées pour créer une instance datetime</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime, date, time
d <span style="color:#f92672">=</span> date(<span style="color:#ae81ff">2005</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">14</span>)
t <span style="color:#f92672">=</span> time(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">30</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">datetime<span style="color:#f92672">.</span>combine(d, t)
</code></pre></div><pre><code>datetime.datetime(2005, 7, 14, 12, 30)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">maintenant <span style="color:#f92672">=</span> datetime<span style="color:#f92672">.</span>utcnow()
maintenant<span style="color:#f92672">.</span>date()
maintenant<span style="color:#f92672">.</span>time()

</code></pre></div><pre><code>datetime.time(15, 24, 48, 669075)
</code></pre>
<ul>
<li>La classe <!-- raw HTML omitted -->timedelta<!-- raw HTML omitted --> du module datetime</li>
</ul>
<p>Cette classe permet de calculer la différence entre deux dates.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> timedelta
delta <span style="color:#f92672">=</span> timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, seconds<span style="color:#f92672">=</span><span style="color:#ae81ff">100</span>)    <span style="color:#75715e"># on crée notre propre timedelta</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">datetime<span style="color:#f92672">.</span>now() <span style="color:#f92672">+</span> delta
</code></pre></div><pre><code>datetime.datetime(2020, 9, 11, 11, 26, 29, 150102)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">datetime<span style="color:#f92672">.</span>now() <span style="color:#f92672">+</span> timedelta(days<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, hours<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, minutes<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, seconds<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>)
</code></pre></div><pre><code>datetime.datetime(2020, 9, 10, 15, 28, 1, 290110)
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">duree <span style="color:#f92672">=</span> datetime(<span style="color:#ae81ff">2010</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">31</span>) <span style="color:#f92672">-</span> datetime(<span style="color:#ae81ff">1981</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">31</span>)
duree
</code></pre></div><pre><code>datetime.timedelta(days=10592)
</code></pre>
<p>On peut ainsi générer des dates pour des séries temporelles avec un pas de temps arbitraire:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> timedelta
dt <span style="color:#f92672">=</span> timedelta(days <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>, hours <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>, minutes <span style="color:#f92672">=</span> <span style="color:#ae81ff">25</span>)
d0 <span style="color:#f92672">=</span> datetime(<span style="color:#ae81ff">2000</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">21</span>)
[str(d0 <span style="color:#f92672">+</span> i <span style="color:#f92672">*</span> dt) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>)]
</code></pre></div><pre><code>['2000-02-21 00:00:00',
 '2000-02-26 06:25:00',
 '2000-03-02 12:50:00',
 '2000-03-07 19:15:00',
 '2000-03-13 01:40:00',
 '2000-03-18 08:05:00',
 '2000-03-23 14:30:00',
 '2000-03-28 20:55:00',
 '2000-04-03 03:20:00',
 '2000-04-08 09:45:00']
</code></pre>
<h2 id="13--bonus--modifier-le-paramétrage-de-pandas">13- bonus : modifier le paramétrage de pandas:</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>set_option(<span style="color:#e6db74">&#34;display.max_row&#34;</span>,<span style="color:#ae81ff">30</span>)  
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>reset_option(<span style="color:#e6db74">&#34;display.max_rows&#34;</span>)
<span style="color:#75715e">#https://www.programcreek.com/python/example/101355/pandas.set_option</span>
<span style="color:#75715e">#https://pandas.pydata.org/pandas-docs/stable/generated/pandas.set_option.html</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
</code></pre></div>
          </div>

          



          
          <div class="article-widget">
            
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Previous</div>
    <a href="/courses/formation_python/8-pandas-exercice/" rel="next">8- La librairie Pandas - Exercice</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/courses/formation_python/9-visualisation/" rel="prev">9- La visualisation graphique avec Python - Cours</a>
  </div>
  
</div>

          </div>
          
        </div>

        <div class="body-footer">
          <p>Last updated on May 5, 2019</p>

          





  
  

<p class="edit-page">
  <a href="https://github.com/gcushen/hugo-academic/edit/master/content/courses%5cFormation_Python%5c8-Pandas.md">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>




          

        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>


      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

      
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.bcfae8267aba63cc55af53a503896bd9.js"></script>

    






  
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
